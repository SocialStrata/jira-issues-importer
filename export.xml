<!--
RSS generated by JIRA (8.3.4#803005-sha1:1f96e09b3c60279a408a2ae47be3c745f571388b) at Fri Apr 10 03:46:38 UTC 2020

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+LUCENENET+AND+status+%3D+Open</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="32" total="32"/>
                <build-info>
            <version>8.3.4</version>
            <build-number>803005</build-number>
            <build-date>13-09-2019</build-date>
        </build-info>

<item>
            <title>[LUCENENET-647] Performance decreasement migrating from 3.0.3 to 4.8.0</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-647</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I&apos;m currently migrating a project, that uses Lucene.Net, from .Net Framework to .Net Core.&lt;/p&gt;

&lt;p&gt;I had to migrate from 3.0.3 version of Lucene to 4.8.0 (beta0007) but I noticed performance decreasement while measuring response time while requesting the database. The response time using Lucene 4.8.0 is two to three times higher than 3.0.3 version.&lt;/p&gt;

&lt;p&gt;I read some forum topics where other users noticed this performance decreasement too. Are you aware about that? Do you plan to do something to improve performances of Lucene 4.8.0?&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: Windows 10&lt;/p&gt;

&lt;p&gt;CPU: Intel Core i7-8700&#160;&lt;/p&gt;

&lt;p&gt;RAM: 32Gb&lt;/p&gt;</environment>
        <key id="13289840">LUCENENET-647</key>
            <summary>Performance decreasement migrating from 3.0.3 to 4.8.0</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Mo Dje">Mo Dje</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Mar 2020 22:21:40 +0700</created>
                <updated>Tue, 10 Mar 2020 17:31:32 +0700</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="17052307" author="eladmarg" created="Thu, 5 Mar 2020 23:24:50 +0700"  >&lt;p&gt;I faced the same performance degradation. &lt;br/&gt;
 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nightowl888&quot; class=&quot;user-hover&quot; rel=&quot;nightowl888&quot;&gt;Shad Storhaug&lt;/a&gt; , I saw some commits on this issue, any chance to release newer beta?&lt;/p&gt;</comment>
                            <comment id="17052367" author="eladmarg" created="Fri, 6 Mar 2020 00:30:02 +0700"  >&lt;p&gt;maybe its because of compression by default.&lt;br/&gt;
&lt;a href=&quot;https://stegard.net/2015/05/performance-of-stored-field-compression-in-lucene-4-1/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://stegard.net/2015/05/performance-of-stored-field-compression-in-lucene-4-1/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17053242" author="mo dje" created="Fri, 6 Mar 2020 17:06:13 +0700"  >&lt;p&gt;Yes I read this article. There is a little improvement by doing the hack presented in this article but there is still a serious gap with the previous version in terms of response time.&lt;/p&gt;</comment>
                            <comment id="17054750" author="nightowl888" created="Mon, 9 Mar 2020 15:42:32 +0700"  >&lt;p&gt;Thanks for the report.&lt;/p&gt;

&lt;p&gt;However, without more information there isn&apos;t much we can do on our end. Specifically, what is slow? Searching, indexing, analyzing?&lt;/p&gt;

&lt;p&gt;Without seeing some code, it is hard to put together any advice on what to do about it. Could you please provide a sample configuration that runs fast in Lucene.NET 3.0.3 and is measurably slower when running with Lucene.NET 4.8.0?&lt;/p&gt;

&lt;p&gt;Also, can you please confirm you are using 4.8.0-beta00007? It has several performance improvements over the previous betas.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eladmarg&quot; class=&quot;user-hover&quot; rel=&quot;eladmarg&quot;&gt;Elad Margalit&lt;/a&gt; - Yes, there are some additional performance improvements in the trunk that haven&apos;t been released yet. Most of them only apply to very specific configurations, though. I am hoping to eliminate the &quot;Support&quot; namespace on ICU4N before doing that release.&lt;/p&gt;</comment>
                            <comment id="17055736" author="mo dje" created="Tue, 10 Mar 2020 16:22:20 +0700"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nightowl888&quot; class=&quot;user-hover&quot; rel=&quot;nightowl888&quot;&gt;Shad Storhaug&lt;/a&gt;, the slowness issue is for searching operation.&lt;/p&gt;

&lt;p&gt;Here is an example of a piece of code used to do a search :&lt;/p&gt;

&lt;p&gt;var queryBuilder = new QueryBuilder(new MyAnalyzer());&lt;/p&gt;

&lt;p&gt;var scoreDocs = indexSearcher.Search(queryBuilder.CreateBooleanQuery(field, value), 1).ScoreDocs;&lt;/p&gt;

&lt;p&gt;I confirm that I am using 4.8.0 beta00007.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Mar 2020 16:24:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0c7jk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-646] Application pool crashes due to missing index file</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-646</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;This problem is critical because when it happens the application pool crashes and the entire website stops working with 503 error code.&lt;/p&gt;

&lt;p&gt;Errors are visible in Windows Event Log (Application), attached.&lt;/p&gt;

&lt;p&gt;When index files are deleted and index is rebuilt the problem goes away.&lt;/p&gt;

&lt;p&gt;I was not able to reproduce the problem by copying corrupted index files (also attached) to another server.&lt;/p&gt;

&lt;p&gt;By googling the error message it looks like it&apos;s coming from file CompoundFileReader.cs, method OpenInput.&lt;/p&gt;

&lt;p&gt;if (entry == null)&lt;br/&gt;
 throw new System.IO.IOException(&quot;No sub-file with id &quot; + id + &quot; found&quot;);&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2016, vers 1607.&lt;/p&gt;

&lt;p&gt;.net version (Release value in regedit:&#160;460805).&lt;/p&gt;</environment>
        <key id="13284340">LUCENENET-646</key>
            <summary>Application pool crashes due to missing index file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jbogusz">Jarek Bogusz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Feb 2020 22:09:22 +0700</created>
                <updated>Mon, 10 Feb 2020 23:37:55 +0700</updated>
                                            <version>Lucene.Net 3.0.3</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="17033737" author="nightowl888" created="Mon, 10 Feb 2020 23:37:55 +0700"  >&lt;p&gt;Version 3.x is no longer being actively supported, and anyone who was involved with supporting that version is no longer involved in the project.&lt;/p&gt;

&lt;p&gt;So, you basically have 3 options:&lt;/p&gt;

&lt;p&gt;1. Upgrade to 4.8.0 beta. According to &lt;a href=&quot;https://code972.com/blog/2016/07/98-lucene-net-4-8-is-in-beta-and-we-need-your-help&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Itamar&apos;s blog post from 2016&lt;/a&gt;, it was then more stable then than 3.0.3 is. Since 2016, 4.8.0 has been improved quite a bit. We have fixed all known crashes and cross-platform issues as well as made several impactful performance improvements. Most importantly, we are actively fixing any bugs that are reported.&lt;br/&gt;
 2. Clone the repo and from the &lt;a href=&quot;https://github.com/apache/lucenenet/tree/3.0.3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;3.0.3 branch&lt;/a&gt;, fix the issue you are having, submit a PR back here and we will do what we can to get it released on NuGet.&lt;br/&gt;
 3. Fork the repo and from the &lt;a href=&quot;https://github.com/apache/lucenenet/tree/3.0.3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;3.0.3 branch&lt;/a&gt;, fix the issue, and deploy a private copy by your own means.&lt;/p&gt;

&lt;p&gt;If you are using at least .NET Framework 4.5, I strongly urge you to consider upgrading to 4.8.0-beta.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12993062" name="CUNY_GC.DummyIndex.crashes.zip" size="3614912" author="jbogusz" created="Mon, 10 Feb 2020 21:42:53 +0700"/>
                            <attachment id="12993063" name="e1.jpg" size="160773" author="jbogusz" created="Mon, 10 Feb 2020 21:40:29 +0700"/>
                            <attachment id="12993058" name="e1.txt" size="1216" author="jbogusz" created="Mon, 10 Feb 2020 21:57:14 +0700"/>
                            <attachment id="12993064" name="e2.jpg" size="138293" author="jbogusz" created="Mon, 10 Feb 2020 21:40:28 +0700"/>
                            <attachment id="12993059" name="e2.txt" size="1051" author="jbogusz" created="Mon, 10 Feb 2020 21:57:14 +0700"/>
                            <attachment id="12993065" name="e3.jpg" size="108599" author="jbogusz" created="Mon, 10 Feb 2020 21:40:28 +0700"/>
                            <attachment id="12993060" name="e3.txt" size="560" author="jbogusz" created="Mon, 10 Feb 2020 21:57:14 +0700"/>
                            <attachment id="12993061" name="prod.net.vers.jpg" size="100983" author="jbogusz" created="Mon, 10 Feb 2020 21:54:16 +0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Feb 2020 16:37:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bbxk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-644] The design and implementation of a better ThreadLocal&lt;T&gt;</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-644</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;This issue was first reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-640&quot; title=&quot;Sequential IndexWriter performance in concurrent environments.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-640&quot;&gt;LUCENENET-640&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When using very high number of threads for long periods of time, the garbage collector will cause all threads to block for several seconds. More details &lt;a href=&quot;https://ayende.com/blog/189761-A/production-postmortem-the-slow-slowdown-of-large-systems&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;There is also a solution being tested, which is blogged about &lt;a href=&quot;https://ayende.com/blog/189793-A/the-design-and-implementation-of-a-better-threadlocal-t&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Ideally, we should adapt the fix after it has been thoroughly tested, provided Microsoft doesn&apos;t fix the problem with &lt;tt&gt;ThreadLocal&amp;lt;T&amp;gt;&lt;/tt&gt; first.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13284162">LUCENENET-644</key>
            <summary>The design and implementation of a better ThreadLocal&lt;T&gt;</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="nightowl888">Shad Storhaug</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>perfomance</label>
                    </labels>
                <created>Mon, 10 Feb 2020 01:15:34 +0700</created>
                <updated>Mon, 10 Feb 2020 01:16:52 +0700</updated>
                                            <version>Lucene.Net 3.0.3</version>
                    <version>Lucene.Net 4.0</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="13261636">LUCENENET-630</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13279124">LUCENENET-640</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bats:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-640] Sequential IndexWriter performance in concurrent environments.</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-640</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;When creating Lucene.Net indices in parallel, sequential-like performance is experienced. Profiling 8 concurrent IndexWriter instances writing in parallel shows that WeakIdentityMap::IdentityWeakReference::Equals spends most time garbage collecting (94.91%) and TokenStream::AssertFinal (87.09% garbage collecting) in my preliminary tests (see screenshots).&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/apache/lucenenet/blob/master/src/Lucene.Net/Util/WeakIdentityMap.cs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;WeakIdentityMap&lt;/a&gt; implementation uses an IdentityWeakReference as key, which is implemented as a class. By inspection of this class, it is merely a System.Runtime.InteropServices.GCHandle wrapper as can be seen in the mono project, manually wrapping of this struct in a struct rather than a class - will eliminate some of the immense amounts of garbage collection.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13279124">LUCENENET-640</key>
            <summary>Sequential IndexWriter performance in concurrent environments.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="matt2843">Mathias Henriksen</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Mon, 13 Jan 2020 23:35:44 +0700</created>
                <updated>Mon, 10 Feb 2020 01:16:52 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                    <fixVersion>Lucene.Net 4.8.0</fixVersion>
                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                <comments>
                            <comment id="17015015" author="nightowl888" created="Tue, 14 Jan 2020 18:22:28 +0700"  >&lt;p&gt;Hi Mathais,&lt;/p&gt;

&lt;p&gt;Thanks for the report and the PR.&lt;/p&gt;

&lt;p&gt;Correct me if I am wrong, but wouldn&apos;t a better fix for this to be to replace &lt;a href=&quot;https://github.com/apache/lucenenet/blob/master/src/Lucene.Net/Util/WeakIdentityMap.cs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;WeakIdentityMap&lt;/tt&gt;&lt;/a&gt; with the thread-safe &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.conditionalweaktable-2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;ConditionalWeakTable&lt;/tt&gt;&lt;/a&gt;? We may still need to utilize &lt;tt&gt;IdentityWeakReference&lt;/tt&gt;, but it would need to be a class since &lt;tt&gt;ConditionalWeakTable&lt;/tt&gt; has a class constraint on &lt;tt&gt;TKey&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Do note that Microsoft didn&apos;t expose the enumerator or the &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.conditionalweaktable-2.addorupdate&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;AddOrUpdate&lt;/a&gt; method of &lt;tt&gt;ConditionalWeakTable&lt;/tt&gt; until .NET Standard 2.1. However, Lucene requires one or the other in every (other) place where &lt;tt&gt;ConditionalWeakTable&lt;/tt&gt; would be useful (specifically, as a replacement for &lt;a href=&quot;https://github.com/apache/lucenenet/blob/01d65bb1409cb34a8bc1444b67dd1ab011d6d4fa/src/Lucene.Net/Support/WeakDictionary.cs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;Lucene.Net.Support.WeakDictionary&lt;/tt&gt;&lt;/a&gt;). An effort to port &lt;tt&gt;ConditionalWeakTable&lt;/tt&gt; from .NET Standard 2.1 back to .NET Standard 2.0 (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-636&quot; title=&quot;Port ConditionalWeakTable from .NET Core 3.x to .NET Standard 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-636&quot;&gt;LUCENENET-636&lt;/a&gt;) is currently underway, but stalled on &lt;a href=&quot;https://github.com/NightOwl888/J2N/tree/feature/conditional-weak-table/src/J2N/Runtime/CompilerServices&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this J2N branch&lt;/a&gt;. Unfortunately, it depends on unmanaged resources that somehow need to be re-mapped or embedded in order to make it functional. Perhaps there is also a way to cut through at a lower level and make a &lt;tt&gt;ConditionalWeakIdentityTable&lt;/tt&gt; that could be used as a direct replacement for &lt;tt&gt;WeakIdentityMap&lt;/tt&gt; instead of using &lt;tt&gt;IdentityWeakReference&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If you could take a look at using &lt;tt&gt;ConditionalWeakTable&lt;/tt&gt; to solve this issue, it would be much appreciated. Since there appears to be one place where the enumerator is required &lt;a href=&quot;https://github.com/apache/lucenenet/blob/01d65bb1409cb34a8bc1444b67dd1ab011d6d4fa/src/Lucene.Net/Store/ByteBufferIndexInput.cs#L377&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;, the best approach would be to first check for compatibility on .NET Standard 2.1 and if that works, help us to complete the port of &lt;tt&gt;ConditionalWeakTable&lt;/tt&gt; for .NET Framework 4.5 and .NET Standard 2.0 by submitting a PR to &lt;a href=&quot;https://github.com/NightOwl888/J2N/tree/feature/conditional-weak-table&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the J2N project&lt;/a&gt; so the same fix can also be applied to those platforms.&lt;/p&gt;
</comment>
                            <comment id="17032448" author="eladmarg" created="Fri, 7 Feb 2020 22:15:33 +0700"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nightowl888&quot; class=&quot;user-hover&quot; rel=&quot;nightowl888&quot;&gt;Shad Storhaug&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayende&quot; class=&quot;user-hover&quot; rel=&quot;ayende&quot;&gt;Ayende Rahien&lt;/a&gt;&#160;faced same issue,&#160;&lt;/p&gt;

&lt;p&gt;take a look &lt;a href=&quot;https://ayende.com/blog/189793-A/the-design-and-implementation-of-a-better-threadlocal-t&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17032641" author="nightowl888" created="Sat, 8 Feb 2020 03:39:13 +0700"  >&lt;p&gt;Elad,&lt;/p&gt;

&lt;p&gt;Well, this particular issue has been addressed by swapping ConditionalWeakTable for WeakIdentityMap. However, we are still using WeakDictionary in several places, most notably in the FieldCacheImpl (see &lt;a href=&quot;https://issues.apache.org/jira/projects/LUCENENET/issues/LUCENENET-610&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LUCENENET-610&lt;/a&gt;). This is due to the lack of enumerator support before .NET Standard 2.1 primarily.&lt;/p&gt;

&lt;p&gt;That said, the article that describes the problem specifically mentions it is &lt;a href=&quot;https://ayende.com/blog/189761-A/production-postmortem-the-slow-slowdown-of-large-systems&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;a problem with Lucene.NET&lt;/a&gt;. Thanks for the link. Hopefully, he is planning to submit the fix back to us after he thoroughly tests it.&lt;/p&gt;</comment>
                            <comment id="17033146" author="ayende" created="Sun, 9 Feb 2020 14:34:42 +0700"  >&lt;p&gt;We are using an old version of Lucene at the moment, so I don&apos;t think that a PR from my current codebase would be very helpful.&lt;/p&gt;

&lt;p&gt;The PRs for the changes in Lucene 3.0.3 are here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ravendb/lucenenet/pull/10&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ravendb/lucenenet/pull/10&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ravendb/lucenenet/pull/11&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ravendb/lucenenet/pull/11&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Feel free to make use of them as you see fit.&lt;/p&gt;

&lt;p&gt;This is currently under testing, we saw GC time reduced from GEN 0 ~0.9 seconds to 0.125 seconds. GEN 2 from 0.9 to 0.5.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="13261636">LUCENENET-630</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13284162">LUCENENET-644</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13282905">LUCENENET-642</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13244718">LUCENENET-610</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13250665">LUCENENET-616</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13276522">LUCENENET-636</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12990748" name="AssertFinalBug.jpg" size="29762" author="matt2843" created="Mon, 13 Jan 2020 23:29:50 +0700"/>
                            <attachment id="12990747" name="IdentityWeakReferenceBug.jpg" size="18346" author="matt2843" created="Mon, 13 Jan 2020 23:29:50 +0700"/>
                            <attachment id="12990745" name="Program.cs" size="2130" author="matt2843" created="Mon, 13 Jan 2020 23:33:43 +0700"/>
                            <attachment id="12990746" name="overviewBug.jpg" size="109971" author="matt2843" created="Mon, 13 Jan 2020 23:29:50 +0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Jan 2020 11:22:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0agfc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-639] Create NuGet Icons</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-639</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;We need icons for the NuGet packages of Lucene.NET&apos;s dependent projects:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/NightOwl888/J2N&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;del&gt;J2N&lt;/del&gt;&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;&lt;del&gt;No specific preference to design, incorporating aspects of .NET and Java logos&lt;/del&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/NightOwl888/ICU4N&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;del&gt;ICU4N&lt;/del&gt;&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;&lt;del&gt;Should incorporate the official Unicode icon (don&apos;t much care for the ICU project&apos;s logo)&lt;/del&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/NightOwl888/Morfologik.Stemming&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Morfologik.Stemming&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;No specific preference to design&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/synhershko/Spatial4n&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Spatial4n&lt;/a&gt;
	&lt;ul&gt;
		&lt;li&gt;No specific preference to design&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13276653">LUCENENET-639</key>
            <summary>Create NuGet Icons</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>help-requested</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Sat, 28 Dec 2019 04:47:20 +0700</created>
                <updated>Sat, 25 Jan 2020 05:17:52 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Project Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0a1io:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-638] Finish implementation of &quot;System Properties&quot; for .NET</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-638</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;In Java, &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;System Properties&lt;/a&gt; are file based properties that can be overridden by for the specific environment (environment variables).&lt;/p&gt;

&lt;p&gt;To implement similar functionality in .NET, we have added the &lt;tt&gt;Lucene.Net.Support.SystemProperties&lt;/tt&gt; class, which currently just reads/writes environment variables.&lt;/p&gt;

&lt;p&gt;With the release of the TestFramework, it is now more important to have Hierarchical file configuration based properties that can be utilized in test projects in order to control the features of the TestFramework. They should also still be able to be specified as environment variables that override the file-based settings.&lt;/p&gt;

&lt;p&gt;We should use a JSON-based file format, ideally following an existing convention in .NET.&lt;/p&gt;

&lt;p&gt;The closest match in .NET Core appears to be the &lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/index&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Microsoft.Extensions.Configuration API&lt;/a&gt;. We need to investigate using this API as a replacement for &lt;tt&gt;Lucene.Net.Support.SystemProperties&lt;/tt&gt;, and come up with a read-write hierarchical file-based configuration solution that can be overridden by environment variables on any platform.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13276652">LUCENENET-638</key>
            <summary>Finish implementation of &quot;System Properties&quot; for .NET</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>help-requested</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Sat, 28 Dec 2019 04:30:56 +0700</created>
                <updated>Sat, 28 Dec 2019 04:30:56 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net.TestFramework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="72000">20h</timeoriginalestimate>
                            <timeestimate seconds="72000">20h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0a1ig:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-637] Factor out ICheckSum and replace with System.Security.Cryptography.HashAlgorithm</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-637</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;&lt;tt&gt;IChecksum&lt;/tt&gt; was brought over from Java in order to plug in the &lt;tt&gt;CRC32&lt;/tt&gt; class.&lt;/p&gt;

&lt;p&gt;However, .NET already has its own abstract class, &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.hashalgorithm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HashAlgorithm&lt;/a&gt; that is used to as a base class for all cryptographic algorithms. There are also several 3rd party implementations of CRC32 that implement &lt;tt&gt;HashAlgorithm&lt;/tt&gt; that we could use (provided we drop support for .NET framework &amp;lt; 4.6.1). &lt;a href=&quot;https://www.nuget.org/packages/Crc32.NET/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Crc32.NET&lt;/a&gt; claims to be one of the fastest implementations.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;IChecksum&lt;/tt&gt; is only utilized in a couple of places, but Lucene.NET&apos;s types should also be renamed accordingly to show they are using &lt;tt&gt;HashAlgorigthm&lt;/tt&gt; instead of &lt;tt&gt;IChecksum&lt;/tt&gt;:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;BufferedChecksum&lt;/tt&gt; &amp;gt; &lt;tt&gt;BufferedHashAlgorithm&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;BufferedChecksumIndexInput&lt;/tt&gt; &amp;gt; &lt;tt&gt;BufferedHashAlgorithmIndexInput&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The APIs between &lt;tt&gt;IChecksum&lt;/tt&gt; and &lt;tt&gt;HashAlgorithm&lt;/tt&gt; differ, but being that they serve the exact same purpose we should be able to make this work with a bit of refactoring.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13276635">LUCENENET-637</key>
            <summary>Factor out ICheckSum and replace with System.Security.Cryptography.HashAlgorithm</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>help-wanted</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Sat, 28 Dec 2019 01:43:38 +0700</created>
                <updated>Sat, 28 Dec 2019 01:43:38 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="18000">5h</timeoriginalestimate>
                            <timeestimate seconds="18000">5h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0a1eo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-636] Port ConditionalWeakTable from .NET Core 3.x to .NET Standard 2.0</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-636</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;As per &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-610&quot; title=&quot;Reduce locking in FieldCacheImpl::Cache::Get&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-610&quot;&gt;LUCENENET-610&lt;/a&gt;, the WeakDictionary that has been created to support FieldCache and a few other Lucene.NET features does not perform well enough in highly concurrent environments.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.conditionalweaktable-2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ConditionalWeakTable&amp;lt;TKey, TValue&amp;gt;&lt;/a&gt; is a suitable replacement on .NET Standard 2.1, but on .NET Standard 2.0, it doesn&apos;t expose the enumerator or the &lt;tt&gt;AddOrUpdate&lt;/tt&gt; method. All of Lucene.NET&apos;s usages require one or the other.&lt;/p&gt;

&lt;p&gt;So, it would definitely be worth the effort to port the full implementation to .NET Standard 2.0.&lt;/p&gt;

&lt;p&gt;This port should be added to &lt;a href=&quot;https://github.com/NightOwl888/J2N&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;J2N&lt;/a&gt; in the &lt;tt&gt;J2N.Runtime.CompilerServices&lt;/tt&gt; namespace (to match .NET&apos;s namespace convention).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13276522">LUCENENET-636</key>
            <summary>Port ConditionalWeakTable from .NET Core 3.x to .NET Standard 2.0</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>help-wanted</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 27 Dec 2019 07:54:14 +0700</created>
                <updated>Thu, 30 Jan 2020 15:24:22 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                    <component>Lucene.Net.Facet</component>
                    <component>Lucene.Net.Spatial</component>
                    <component>Lucene.Net.TestFramework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="28800">8h</timeoriginalestimate>
                            <timeestimate seconds="28800">8h</timeestimate>
                                            <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13279124">LUCENENET-640</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13244718">LUCENENET-610</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0a0pk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-635] Make RandomizedTesting into a separate library</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-635</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;We have ported the generators from &lt;a href=&quot;https://github.com/randomizedtesting/randomizedtesting&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RandomizedTesting&lt;/a&gt; that Lucene.NET needs to support its tests and added this code to the TestFramework (unlike Lucene), both as static utility classes and as extension methods. The generators we have now in the TestFramework are probably enough to cover most random testing use cases for end users.&lt;/p&gt;

&lt;p&gt;That said, it would be useful for the .NET community at large if the random generators were made into a separate library so randomized test data can be easily generated without referencing the Lucene.NET test framework. The latest version of RandomizedTesting has more options for generating random data than what we have ported.&lt;/p&gt;

&lt;p&gt;The library should be named after &lt;a href=&quot;https://github.com/randomizedtesting/randomizedtesting/tree/master/randomized-runner/src/main/java/com/carrotsearch/randomizedtesting/generators&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RandomizedTesting&lt;/a&gt; (possibly RandomizedTesting.Generators) so that someday if the test runner is also ported (see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-627&quot; title=&quot;Port RandomizedTesting Test Runner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-627&quot;&gt;LUCENENET-627&lt;/a&gt;), there is a logical way to integrate it.&lt;/p&gt;

&lt;p&gt;There is no reason I can think of to do this before Lucene.NET 4.8.0 is released. This could easily be done out of band with the release and we could integrate into the test framework when Lucene.NET is upgraded to the next version of Lucene.&lt;/p&gt;

&lt;p&gt;This task would make a great little project for anyone who wants to contribute to the Lucene.NET effort.&lt;br/&gt;
 &#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13276382">LUCENENET-635</key>
            <summary>Make RandomizedTesting into a separate library</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>testability</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Thu, 26 Dec 2019 04:03:54 +0700</created>
                <updated>Thu, 26 Dec 2019 04:03:54 +0700</updated>
                                                                            <component>Lucene.Net.TestFramework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09zug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-633] Setup tests on additional platforms that .NET Standard supports</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-633</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;We have recently setup an Azure DevOps YAML build configuration, which makes adding testing environments easier to our CI process. Adding tests to ensure support on macOS and Linux has been completed already, and (fortunately) the number of bugs that were found was fairly minimal (most of them were addressed in beta00006). However, there are other platforms .NET Standard supports that are commonly in use by Lucene.NET users which we should also setup our tests to run on.&lt;/p&gt;

&lt;p&gt;Looking through the JIRA issues, 3 platforms that have been mentioned are:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Mono&lt;/li&gt;
	&lt;li&gt;UWP&lt;/li&gt;
	&lt;li&gt;Xamarin iOS&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;We should do a survey to find out what other platforms may be commonly in use and make the determination how important it is to test on them, and of course take into consideration whether the tests require a special setup that Azure Pipelines doesn&apos;t provide on any of the &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Microsoft-hosted agents&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261680">LUCENENET-633</key>
            <summary>Setup tests on additional platforms that .NET Standard supports</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 09:11:37 +0700</created>
                <updated>Fri, 11 Oct 2019 09:19:57 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="72000">20h</timeoriginalestimate>
                            <timeestimate seconds="72000">20h</timeestimate>
                                            <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13166029">LUCENENET-602</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12558623">LUCENENET-491</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12513954">LUCENENET-435</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07hl4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-632] Review tests for Lucene.Net assembly</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-632</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;A line-by-line review would be best, but at the very least we should be checking that the implementations are complete and the test conditions are the same as in &lt;a href=&quot;https://github.com/apache/lucene-solr/tree/releases/lucene-solr/4.8.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Java Lucene 4.8.0&lt;/a&gt;. Checking at the method level to ensure they all exist and have the right attributes has been completed already on Lucene.Net (core).&lt;/p&gt;

&lt;p&gt;Occasionally, tests are still being found with important lines that have been commented because the functionality didn&apos;t exist at the time they were ported. We need some assurance that none of our green tests are false positives.&lt;/p&gt;

&lt;p&gt;The tests that are most likely to have issues are the tests for&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Lucene.Net (core)&lt;/li&gt;
	&lt;li&gt;Lucene.Net.Classification&lt;/li&gt;
	&lt;li&gt;Lucene.Net.Codecs&lt;/li&gt;
	&lt;li&gt;Lucene.Net.Expressions&lt;/li&gt;
	&lt;li&gt;Lucene.Net.Facet&lt;/li&gt;
	&lt;li&gt;Lucene.Net.Join&lt;/li&gt;
	&lt;li&gt;Lucene.Net.Queries&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13261676">LUCENENET-632</key>
            <summary>Review tests for Lucene.Net assembly</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 08:53:39 +0700</created>
                <updated>Fri, 11 Oct 2019 08:53:39 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="144000">40h</timeoriginalestimate>
                            <timeestimate seconds="144000">40h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07hk8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-631] Fix issues with culture in Lucene.Net.Queries</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-631</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;In Java, number to string/string to number conversions were nearly all invariant. Not sure if that is the correct decision in .NET. If not, we need overloads to pass culture. Priority lower because technically this can be done out of band with the release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261674">LUCENENET-631</key>
            <summary>Fix issues with culture in Lucene.Net.Queries</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 08:37:15 +0700</created>
                <updated>Fri, 11 Oct 2019 08:37:15 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net.Queries</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07hjs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-630] Identify/Fix Bottlenecks</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-630</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;We need some help profiling Lucene.NET to identify and/or fix any potential bottlenecks. Please make us aware of anything you find by opening a new JIRA issue or by letting us know on the &lt;a href=&quot;https://cwiki.apache.org/confluence/display/LUCENENET/Mailing+Lists&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;dev mailing list&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261636">LUCENENET-630</key>
            <summary>Identify/Fix Bottlenecks</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 02:25:39 +0700</created>
                <updated>Mon, 10 Feb 2020 01:16:00 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                    <component>Lucene.Net.Analysis.Common</component>
                    <component>Lucene.Net.Classification</component>
                    <component>Lucene.Net.Codecs</component>
                    <component>Lucene.Net.Expressions</component>
                    <component>Lucene.Net.Facet</component>
                    <component>Lucene.Net.Highlighter</component>
                    <component>Lucene.Net.QueryParser</component>
                    <component>Lucene.Net.Suggest</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="108000">30h</timeoriginalestimate>
                            <timeestimate seconds="108000">30h</timeestimate>
                                            <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="13279124">LUCENENET-640</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13244718">LUCENENET-610</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13261635">LUCENENET-629</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13284162">LUCENENET-644</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13283936">LUCENENET-643</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13282905">LUCENENET-642</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07hbc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-629] Lucene &amp; Memory Mapped Files</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-629</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;This came in on the user mailing list on 15-July-2019 and was originally reported by Vincent Van Den Berghe (Vincent.VanDenBerghe@bvdinfo.com)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Hello everyone,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve just had an interesting performance debugging session, and one of the things I&apos;ve learned is probably applicable for Lucene.NET.&lt;/p&gt;

&lt;p&gt;I&apos;ll give it here with no guarantees, hoping that it might be useful to someone.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Lucene uses memory mapped files for reading, most notably via MemoryMappedFileByteBuffer. Profiling indicated that there are 2 calls that have quite some overhead:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public override ByteBuffer Get(byte[] dst, int offset, int length)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public override byte Get()&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;These calls spend their time in 2 methods of MemoryMappedViewAccessor:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;public int ReadArray&amp;lt;T&amp;gt;(long position, T[] array, int offset, int count) where T : struct; public byte ReadByte(long position);&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The implementation of both contains a lot of overhead, especially ReadArray&amp;lt;T&amp;gt;: apart from the parameter validation, this method makes sure that the generic parameter T is properly aligned. This is irrelevant in our use case, since T is byte. But because the method implementation doesn&apos;t make any assumptions on T (other than the fact that is must be a value type, which is the generic constraint), every call goes through the same motions, every time.&lt;/p&gt;

&lt;p&gt;Microsoft should have provided specializations for common value types, and certainly for byte arrays. Sadly, this is not the case.&lt;/p&gt;

&lt;p&gt;The other one, ReadByte, acquires and releases the (unsafe) pointer before derefencing it to return one single byte.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A way to do this more efficiently (while avoiding unsafe code), is to acquire the pointer handle associated with the view accessor, and use that pointer to marshal information back to the caller.&lt;/p&gt;

&lt;p&gt;To do this, MemoryMappedFileByteBuffer needs one extra member variable to hold the address:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; private long m_Ptr;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Then, the 2 MemoryMappedFileByteBuffer constructors need to be rewritten as follows (mainly to avoid code duplication):&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public MemoryMappedFileByteBuffer(MemoryMappedViewAccessor accessor, int capacity)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; : this(accessor, capacity, 0)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;/span&gt; &lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public MemoryMappedFileByteBuffer(MemoryMappedViewAccessor accessor, int capacity, int offset)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; : base(capacity)&lt;/p&gt;

&lt;p&gt;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.accessor = accessor;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; this.offset = offset;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions();&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; try&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {

&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&lt;/span&gt; &lt;/div&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; finally&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; bool success = false;

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; accessor.SafeMemoryMappedViewHandle.DangerousAddRef(ref success);

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; m_Ptr = accessor.SafeMemoryMappedViewHandle.DangerousGetHandle().ToInt64() + accessor.PointerOffset;

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;/span&gt; &lt;/div&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The only thing this does is getting the pointer handle. Yes, the method has the word &quot;Dangerous&quot; in it, but it&apos;s perfectly safe &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Note that this needs .NET version 4.5.1 or later, because we want the starting position of the view from the beginning of the memory mapped file through the PointerOffset property which is unavailable in earlier .NET releases.&lt;/p&gt;

&lt;p&gt;What the constructor does is to get a 64-bit quantity representing the start of the memory mapped view. The special construct with an &quot;empty try block&quot; conforms to the documentation regarding constrained execution regions (although I think it&apos;s more of a cargo-cult thing, since constrained execution doesn&apos;t solve a lot of problems in this case).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Finally, the Dispose method needs to be extended to release the pointer handle using DangerousRelease:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public void Dispose()&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (accessor != null)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; accessor.SafeMemoryMappedViewHandle.DangerousRelease();

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; accessor.Dispose();

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; accessor = null;

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;/span&gt; &lt;/div&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;At this point, we can replace the ReadArray in ByteBuffer Get by this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Marshal.Copy(new IntPtr(m_Ptr + Ix(NextGetIndex(length))), dst, offset, length);&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And the ReadByte method becomes:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; public override byte Get()&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; return Marshal.ReadByte(new IntPtr(m_Ptr + Ix(NextGetIndex())));

&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;/span&gt; &lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The Marshal class contains various read method to read various data types (ReadInt16, ReadInt32), and it would be possible to rewrite all other methods that currently assemble the types byte-per-byte. This is left as an exercise for the reader. In any case, these methods have a lot less overhead than the corresponding methods in the memory view accessor.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In my measurements, even when files reside on slow devices, the performance improvements are noticeable: I&apos;m seeing improvements of 5%, especially for large segments. If you have slow I/O, the slow I/O still dominates, of course: no such thing as a free lunch and all that.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As I said, no guarantees. Have fun with it! If you find something that is unacceptable, let me know.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Vincent&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13261635">LUCENENET-629</key>
            <summary>Lucene &amp; Memory Mapped Files</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 02:15:58 +0700</created>
                <updated>Sat, 12 Oct 2019 11:43:43 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="13261636">LUCENENET-630</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07hb4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-628] Complete ICU4N to production release</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-628</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;ICU4J is Lucene&apos;s biggest dependency. Several attempts have been made to utilize various alternatives:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/niaher/icu4net&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ICU4NET&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/sillsdev/icu-dotnet&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;icu-dotnet&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;But we ran into several issues:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Lack of support for 32/64 bit&lt;/li&gt;
	&lt;li&gt;Lack of support for .NET Standard Platforms&lt;/li&gt;
	&lt;li&gt;Lack of features, and problems when trying to implement them&lt;/li&gt;
	&lt;li&gt;Lack of thread safety&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;We finally ended up doing a direct port of about 40% of ICU4J&apos;s features in order to support Lucene.NET. The project is named ICU4N, and is progressing in an external GitHub repository. There are &lt;a href=&quot;https://github.com/NightOwl888/ICU4N/issues?q=is%3Aissue+is%3Aopen+label%3A%22up+for+grabs%22&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;several up-for-grabs issues&lt;/a&gt; that we could use some help with to get Lucene.NET into production.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/NightOwl888/ICU4N&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/NightOwl888/ICU4N&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261633">LUCENENET-628</key>
            <summary>Complete ICU4N to production release</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>dependency</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 02:06:00 +0700</created>
                <updated>Fri, 11 Oct 2019 02:06:00 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net.Analysis.SmartCN</component>
                    <component>Lucene.Net.Benchmark</component>
                    <component>Lucene.Net.ICU</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/NightOwl888/ICU4N/issues?q=is%3Aissue+is%3Aopen+label%3A%22up+for+grabs%22]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07hao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-627] Port RandomizedTesting Test Runner</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-627</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;While the test framework can run with the standard NUnit test runner and we have managed to make it work, it is missing the ability to reproduce a random test failure, which is crucial for debugging some of the more complicated random tests. Lucene uses a custom JUnit test runner called &lt;a href=&quot;https://github.com/randomizedtesting/randomizedtesting&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RandomizedTesting&lt;/a&gt; to accomplish this.&lt;/p&gt;

&lt;p&gt;It also includes some other nice features&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Ensure when a test fails, the random seeds are included in error messages and logs&lt;/li&gt;
	&lt;li&gt;Code analysis to ensure the tests are setup properly&lt;/li&gt;
	&lt;li&gt;Run tests in a random order to ensure they are not dependent upon each other&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Preliminary analysis shows that the API for NUnit allows building custom test runners and it is a close enough match to implement the functionality. Most likely, this will require a custom adapter as well, so the test runner can integrate into Visual Studio and dotnet test/mstest.&lt;/p&gt;

&lt;p&gt;Do note that without doing some pretty heavy refactoring on the Codec, Directory, and LuceneTestCase classes, it is not possible to run tests in parallel within the same AppDomain because the codecs use a static variable to turn codec impersonation on/off. For now, it would probably be best to run tests serially.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261628">LUCENENET-627</key>
            <summary>Port RandomizedTesting Test Runner</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 01:39:58 +0700</created>
                <updated>Thu, 26 Dec 2019 04:08:44 +0700</updated>
                                                                            <component>Lucene.Net.TestFramework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="540000">150h</timeoriginalestimate>
                            <timeestimate seconds="540000">150h</timeestimate>
                                        <comments>
                            <comment id="16955587" author="nightowl888" created="Mon, 21 Oct 2019 01:25:17 +0700"  >&lt;p&gt;I have opened a dialog with the NUnit team, trying to gauge whether we can get them to add the most important features we need, whether it will be entirely up to us to port the test runner and create our own Visual Studio / dotnet test adapters, or somewhere in the middle: &lt;a href=&quot;https://github.com/nunit/nunit/issues/3405&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nunit/nunit/issues/3405&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16986946" author="nightowl888" created="Tue, 3 Dec 2019 21:24:48 +0700"  >&lt;p&gt;After updating the test framework to utilize the &lt;tt&gt;NUnit.Framework.TestContext.CurrentContext.Random&lt;/tt&gt; property, I noticed that random test failures now repeat reliably until the next build. Whether or not there is a way to lock in that behavior from one build to the next, this is probably adequate enough to avoid porting the entire RandomizedTesting framework.&lt;/p&gt;

&lt;p&gt;That said, it would probably make sense to create a new library with the random generators so they can be shared without a reference to our test framework and all of the dependencies that come with it. We should also migrate the extension methods for the &lt;tt&gt;Random&lt;/tt&gt; class.&lt;/p&gt;</comment>
                            <comment id="17003373" author="nightowl888" created="Thu, 26 Dec 2019 04:08:44 +0700"  >&lt;p&gt;Lowering priority of this and removing the 4.8.0 version, as it is not required for the Lucene.NET release. It might still be useful to do this someday, so I am keeping the issue open.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310360">
                    <name>Dependent</name>
                                                                <inwardlinks description="Dependent">
                                        <issuelink>
            <issuekey id="13250168">LUCENENET-614</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07h9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-626] API: Review to ensure IDisposable is being used correctly and disposable pattern implemented correctly</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-626</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;There have been several issues found recently with the disposable pattern not being implemented correctly. I have also been made aware that there is at least one class (Lucene.Net.Store.Lock, if I recall correctly) that is designed to be re-opened after it is closed.&lt;/p&gt;

&lt;p&gt;We need a review to ensure all classes that implement disposable are doing it correctly and have correctly implemented the dispose pattern both for sealed and unsealed types. We also need to have a close look at whether any classes should be reverted back to using Close() instead of Dispose() on account that the class instance was designed to be used again after the Dispose() call.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261620">LUCENENET-626</key>
            <summary>API: Review to ensure IDisposable is being used correctly and disposable pattern implemented correctly</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 01:17:44 +0700</created>
                <updated>Fri, 11 Oct 2019 01:22:05 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                    <component>Lucene.Net Demo</component>
                    <component>Lucene.Net.Analysis.Common</component>
                    <component>Lucene.Net.Analysis.ICU</component>
                    <component>Lucene.Net.Analysis.Kuromoji</component>
                    <component>Lucene.Net.Analysis.Morfologik</component>
                    <component>Lucene.Net.Analysis.Phonetic</component>
                    <component>Lucene.Net.Analysis.SmartCN</component>
                    <component>Lucene.Net.Analysis.Stempel</component>
                    <component>Lucene.Net.Benchmark</component>
                    <component>Lucene.Net.Classification</component>
                    <component>Lucene.Net.Codecs</component>
                    <component>Lucene.Net.Expressions</component>
                    <component>Lucene.Net.Facet</component>
                    <component>Lucene.Net.Grouping</component>
                    <component>Lucene.Net.Highlighter</component>
                    <component>Lucene.Net.ICU</component>
                    <component>Lucene.Net.Join</component>
                    <component>Lucene.Net.Memory</component>
                    <component>Lucene.Net.Misc</component>
                    <component>Lucene.Net.Queries</component>
                    <component>Lucene.Net.QueryParser</component>
                    <component>Lucene.Net.Replicator</component>
                    <component>Lucene.Net.Sandbox</component>
                    <component>Lucene.Net.Spatial</component>
                    <component>Lucene.Net.Suggest</component>
                    <component>Lucene.Net.TestFramework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="180000">50h</timeoriginalestimate>
                            <timeestimate seconds="180000">50h</timeestimate>
                                        <comments>
                            <comment id="16948845" author="nightowl888" created="Fri, 11 Oct 2019 01:22:05 +0700"  >&lt;p&gt;It is believed that IncrementToken() was being called after Dispose() because of a bug in the test framework that has been addressed. We need verification that this issue is no longer happening.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="13244737">LUCENENET-611</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12539572">LUCENENET-468</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07h7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-625] Fully document Codec Factories and include usage samples</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-625</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;We have diverged from Lucene by replacing the NamedSPILoader and SPIClassIterator with abstract factories to load codec types (possibly from a dependency injection container). While the API docs are mostly complete, they are missing usage samples of how to extend the factories to register custom codec, doc values format, and postings format types.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261615">LUCENENET-625</key>
            <summary>Fully document Codec Factories and include usage samples</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="nightowl888">Shad Storhaug</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Oct 2019 00:55:50 +0700</created>
                <updated>Fri, 11 Oct 2019 00:55:50 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="54000">15h</timeoriginalestimate>
                            <timeestimate seconds="54000">15h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07h6o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-624] Fix asserts that are failing on .NET Standard 2.0</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-624</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;There are a few asserts that fail on .NET Standard 2.0. They have been conditionally compiled out of the code due to the fact that on .NET Core 2.1 they cause the test runner to fatally crash, however these are a sign that something could be seriously wrong with the codecs (possibly causing index corruption).&lt;/p&gt;

&lt;p&gt;Here are the known failures:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucenenet/blob/ecf62129099d04a95edce3fca1243c7b4d2fac6b/src/Lucene.Net/Codecs/Lucene3x/Lucene3xTermVectorsReader.cs#L822-L828&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Lucene3xTermVectorsReader&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucenenet/blob/ecf62129099d04a95edce3fca1243c7b4d2fac6b/src/Lucene.Net/Codecs/Lucene40/Lucene40TermVectorsReader.cs#L811-L815&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Lucene40TermVectorsReader&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucenenet/blob/ecf62129099d04a95edce3fca1243c7b4d2fac6b/src/Lucene.Net/Codecs/BlockTreeTermsWriter.cs#L437-L439&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BlockTreeTermsWriter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13261613">LUCENENET-624</key>
            <summary>Fix asserts that are failing on .NET Standard 2.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>bug</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 11 Oct 2019 00:46:51 +0700</created>
                <updated>Fri, 11 Oct 2019 00:46:51 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="43200">12h</timeoriginalestimate>
                            <timeestimate seconds="43200">12h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07h68:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-620] Automate Generation of QueryParser to C#</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-620</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;The Lucene team is using a tool called &lt;a href=&quot;https://github.com/javacc/javacc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;javacc&lt;/a&gt; to generate the main business logic behind the query parsers. If we had a similar tool it could help:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Speed up the process of porting/upgrading QueryParser&lt;/li&gt;
	&lt;li&gt;Reduce the number of bugs in these modules caused by doing it manually&lt;/li&gt;
	&lt;li&gt;Most importantly, QueryParser could potentially be generated without using exceptions for control flow&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The javacc tool uses a configuration file as input and creates java code as output. Here are some examples of those configuration files:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.1/lucene/queryparser/src/java/org/apache/lucene/queryparser/classic/QueryParser.jj&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.1/lucene/queryparser/src/java/org/apache/lucene/queryparser/classic/QueryParser.jj&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.1/lucene/queryparser/src/java/org/apache/lucene/queryparser/surround/parser/QueryParser.jj&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.1/lucene/queryparser/src/java/org/apache/lucene/queryparser/surround/parser/QueryParser.jj&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This has not been fully researched, but there are at least 2 potential ways we could approach this:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Find a similar tool to javacc in .NET that supports similar options that were used in javacc, and create a converter tool to change the javacc configuration into a configuration that the .NET tool supports.&lt;/li&gt;
	&lt;li&gt;Do a direct port of javacc to C#, and fix its logic to use a more efficient control flow mechanism than exceptions (perhaps &lt;tt&gt;goto&lt;/tt&gt; would be the most direct replacement).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;It seems &lt;a href=&quot;https://dzone.com/articles/antlr-and-javacc-parser-generators&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;according to this document&lt;/a&gt; that using a port of javacc should be our first choice because of the performance benchmarks of the resultant code. And certainly that would eliminate the risk of having a .NET tool not support an option that we need either now or for some future version of Lucene.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13251144">LUCENENET-620</key>
            <summary>Automate Generation of QueryParser to C#</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Wish</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Fri, 16 Aug 2019 09:41:54 +0700</created>
                <updated>Fri, 11 Oct 2019 02:30:44 +0700</updated>
                                                                            <component>Lucene.Net.QueryParser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="432000">120h</timeoriginalestimate>
                            <timeestimate seconds="432000">120h</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05pzk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-619] Known Failing Tests on Lucene.Net</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-619</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;Up for grabs. Please contribute to Lucene.Net.&lt;/p&gt;

&lt;p&gt;All 8000+ tests pass most of the time, but there are still a few that fail under the random conditions we test them in. This is a complete list of the known tests that fail and what is known about them. Note that these may not be all of the ways the tests can fail.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;&lt;del&gt;Lucene.Net.Search.TestSearchAfter::TestQueries()&lt;/del&gt;&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Related to current culture&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp2.1 on macOS&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp1.0 on Linux&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;&lt;del&gt;Lucene.Net.Util.TestVersionComparer::TestVersions()&lt;/del&gt;&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Related to current culture&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp2.1 on macOS&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.Index.TestIndexWriter::TestTwoThreadsInterruptDeadlock()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Happens on every target framework/OS&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.Index.TestIndexWriter::TestThreadInterruptDeadlock()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Happens on every target framework/OS&lt;/li&gt;
		&lt;li&gt;Fails with message:
 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;FAILED; unexpected exception
 System.InvalidOperationException: cannot close: prepareCommit was already called with no corresponding call to commit
 at Lucene.Net.Index.IndexWriter.CloseInternal(Boolean waitForMerges, Boolean doFlush) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; F:\Projects\lucenenet\src\Lucene.Net\Index\IndexWriter.cs:line 1157
 at Lucene.Net.Index.IndexWriter.Dispose(Boolean waitForMerges) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; F:\Projects\lucenenet\src\Lucene.Net\Index\IndexWriter.cs:line 1096
 at Lucene.Net.Index.IndexWriter.Dispose() &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; F:\Projects\lucenenet\src\Lucene.Net\Index\IndexWriter.cs:line 1053
 at Lucene.Net.Index.TestIndexWriter.IndexerThreadInterrupt.Run() &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; F:\Projects\lucenenet\src\Lucene.Net.Tests\Index\TestIndexWriter.cs:line 1223&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
		&lt;li&gt;The error message doesn&apos;t occur when using &lt;tt&gt;lock (this&lt;/tt&gt;} in&#160;&lt;tt&gt;IndexWriter.CommitInternal()&lt;/tt&gt; to make&#160;&lt;tt&gt;PrepareCommitInternal()&lt;/tt&gt; and&#160;&lt;tt&gt;FinishCommit()&lt;/tt&gt; atomic, but the test still fails and the extra lock causes deadlocks in other tests. For some reason, the existing &lt;tt&gt;commitLock&lt;/tt&gt; isn&apos;t completely atomic in some (unknown) case.&lt;/li&gt;
		&lt;li&gt;The test does not fail if both of the following lines are commented in &lt;tt&gt;TestIndexWriter.IndexerThreadInterrupt::Run()&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;w.UpdateDocument(new Term(&quot;id&quot;, idField.GetStringValue()), doc);&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;w.AddDocument(doc);&lt;/tt&gt;&lt;/li&gt;
		&lt;li&gt;The test does not fail if &lt;tt&gt;RAMDirectory&lt;/tt&gt; is used instead of &lt;tt&gt;MockDirectoryWrapper&lt;/tt&gt;&lt;/li&gt;
		&lt;li&gt;It is quite possible that the problem is with &lt;tt&gt;MockDirectoryWrapper&lt;/tt&gt; or one of its subcomponents, although the locking behavior of&#160;&lt;tt&gt;IndexWriter&lt;/tt&gt; is also suspicious&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.Classification.KNearestNeighborClassifierTest::TestPerformance()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Happens on netcoreapp2.1 on Windows&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp1.0 on Windows&lt;/li&gt;
		&lt;li&gt;Happens on net451 on Windows&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.Analysis.NGram.EdgeNGramTokenizerTest::TestFullUTF8Range()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Happens on netcoreapp1.0 on Linux&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.Analysis.NGram.NGramTokenizerTest::TestFullUTF8Range()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Happens on net451 on Windows&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp1.0 on Linux&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp1.0 on Windows&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp1.0 on macOS&lt;/li&gt;
		&lt;li&gt;Happens on netcoreapp2.1 on macOS&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.Search.VectorHighlight.SimpleFragmentsBuilderTest::TestRandomDiscreteMultiValueHighlighting()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Happens on Windows (I think on all target frameworks, but netcoreapp1.0 for sure)&lt;/li&gt;
		&lt;li&gt;Not related to current culture&lt;/li&gt;
		&lt;li&gt;Definitely a problem with the highlighter, not the test or test framework&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.QueryParsers.Flexible.Standard.TestQPHelper::TestDateRange()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Does not happen on Windows, but happens on both Linux and macOS&lt;/li&gt;
		&lt;li&gt;Related to current culture - fails with &lt;tt&gt;new CultureInfo(&quot;ar&quot;)&lt;/tt&gt; specifically (and others)&lt;/li&gt;
		&lt;li&gt;Stack trace
 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;System.FormatException : String &lt;span class=&quot;code-quote-red&quot;&gt;&apos;1&#8207;&#8207;/1&#8207;&#8207;/2002&apos;&lt;/span&gt; was not recognized as a valid DateTime.
 at System.DateTimeParse.Parse(ReadOnlySpan`1 s, DateTimeFormatInfo dtfi, DateTimeStyles styles)
 at Lucene.Net.QueryParsers.Flexible.Standard.TestQPHelper.AssertDateRangeQueryEquals(StandardQueryParser qp, String field, String startDate, String endDate, DateTime endDateInclusive, Resolution resolution) &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; D:\a\1\s\src\Lucene.Net.Tests.QueryParser\Flexible\Standard\TestQPHelper.cs:line 837
 at Lucene.Net.QueryParsers.Flexible.Standard.TestQPHelper.TestDateRange() &lt;span class=&quot;code-object&quot;&gt;in&lt;/span&gt; D:\a\1\s\src\Lucene.Net.Tests.QueryParser\Flexible\Standard\TestQPHelper.cs:line 826&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#d04437&quot;&gt;&lt;b&gt;Lucene.Net.Expressions.TestExpressionSorts::TestQueries()&lt;/b&gt;&lt;/font&gt;
	&lt;ul&gt;
		&lt;li&gt;Happens on net451 on Windows, x86, in Release mode only (if Release, x86, or different target framework, does not fail)&lt;/li&gt;
		&lt;li&gt;Does not seem to fail using &lt;tt&gt;dotnet vstest&lt;/tt&gt;, only fails in Visual Studio 2017/2019&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Note we now have an &lt;a href=&quot;https://github.com/apache/lucenenet/blob/master/azure-pipelines.yml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;azure-pipelines.yml&lt;/tt&gt;&lt;/a&gt; configuration file in our repository that anyone can use to setup a build pipeline to see the tests run on Windows, macOS and Linux by setting up a &lt;a href=&quot;https://azure.microsoft.com/en-us/services/devops/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;free Azure DevOps account&lt;/a&gt;. If you create a public project to run the tests in, it will take roughly an hour to see the test results (a private project will take significantly longer on the free subscription because they only provide a single parallel job).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;NOTES&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;font color=&quot;#205081&quot;&gt;If you want to work on one of these issues, please open a new JIRA ticket and make it &quot;contained by&quot; this one, so your efforts aren&apos;t duplicated by someone else. Assign the issue to yourself. If you can&apos;t work out the issue, make sure that you unassign yourself and comment on it below that it is still unresolved and up for grabs.&lt;/font&gt;&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#205081&quot;&gt;Sometimes problems can be spotted just by comparing the &lt;a href=&quot;https://github.com/apache/lucene-solr/tree/8fdf89690404c0e65784b2c5477552b9dec58591/lucene&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Lucene 4.8.0 code&lt;/a&gt; against &lt;a href=&quot;https://github.com/apache/lucenenet&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Lucene.Net 4.8.0 code&lt;/a&gt;.&lt;/font&gt;&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#205081&quot;&gt;The code should be checked to make sure there were no translation problems from Java to C#. This may be easier than it sounds, as you can type phrases like &quot;java HashMap equivalent c#&quot; into Google to find the answers easily.&lt;/font&gt;&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#205081&quot;&gt;We can change the code to properly match the behavior of Java, but no cheating by changing the conditions of the test! Unless, of course, the test conditions were translated to C# wrong, which has been known to happen.&lt;/font&gt;&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#205081&quot;&gt;Random failures can often be made to happen more frequently by adding a &lt;tt&gt;RepeatAttribute&lt;/tt&gt; to the top of the test. Try running 30 or 40 times and you will see the failure much more often.&lt;/font&gt;&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#205081&quot;&gt;If you find a solution to make the test pass, please&#160;&lt;a href=&quot;https://github.com/apache/lucenenet/pulls&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;open a PR on GitHub&lt;/a&gt; or alternatively post the solution here so we can try it ourselves.&lt;/font&gt;&lt;/li&gt;
	&lt;li&gt;&lt;font color=&quot;#205081&quot;&gt;If you get the same warm fuzzy feeling we do when we make a test green, feel free to fix another one.&lt;/font&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt;Also, let us know if you find any failing test that is not on this list (aside from the &quot;file in use by another process&quot; issue that is known to happen with multiple tests on Linux and macOS - see&lt;/font&gt; &lt;a href=&quot;https://issues.apache.org/jira/projects/LUCENENET/issues/LUCENENET-618&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LUCENENET-618&lt;/a&gt;&lt;font color=&quot;#ff0000&quot;&gt; if you want to take a crack at that issue&lt;/font&gt;&lt;font color=&quot;#707070&quot;&gt;)&lt;/font&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13251010">LUCENENET-619</key>
            <summary>Known Failing Tests on Lucene.Net</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>test-fail</label>
                            <label>test-failure</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Thu, 15 Aug 2019 19:59:06 +0700</created>
                <updated>Wed, 4 Sep 2019 04:04:56 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                    <component>Lucene.Net Test</component>
                    <component>Lucene.Net.Analysis.Common</component>
                    <component>Lucene.Net.Classification</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="13254467">LUCENENET-621</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13254468">LUCENENET-622</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05p5s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-613] Need tests to ensure 2-way index/codec compatibility with Lucene</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-613</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;Lucene came with several tests to ensure backward compatibility with indexes, and included many zipped index archives which are used to ensure Lucene.NET can read indexes that were produced by Lucene.&lt;/p&gt;

&lt;p&gt;However, we have no tests to ensure that indexes produced by Lucene.NET 4.8.0 can be read by Lucene 4.8.0.&lt;/p&gt;

&lt;p&gt;A way this could be done:&lt;/p&gt;

&lt;p&gt;1. Create a command line utility that is part of the Lucene.NET build that produces a series of test index cases (at least 1 case per codec/doc values format/postings format combination). Unlike the existing compatibility tests that zip the indexes into embedded resources, we should be creating indexes based on the current build of Lucene.NET.&lt;br/&gt;
2. Create a Java/JUnit test project that depends on Lucene 4.8.0 and add a test per test case.&lt;br/&gt;
3. Add build/test tasks to &lt;tt&gt;azure-pipelines.yml&lt;/tt&gt; to run the .NET utility to produce the indexes and then execute Java/JUnit tests on each target framework/OS/platform&lt;/p&gt;

&lt;p&gt;These tests should be designed in such a way that when we upgrade to the next version of Lucene the tests are simple to upgrade as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13250159">LUCENENET-613</key>
            <summary>Need tests to ensure 2-way index/codec compatibility with Lucene</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Mon, 12 Aug 2019 08:06:23 +0700</created>
                <updated>Thu, 15 Aug 2019 15:24:36 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                    <component>Lucene.Net.Codecs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05jww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-611] TokenStream.IncrementToken() is called after Dispose() is called</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-611</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;When overriding&#160;&lt;tt&gt;Dispose(bool)&lt;/tt&gt; in either&#160;&lt;tt&gt;TokenStream&lt;/tt&gt; subclasses, Lucene.Net will call&#160;&lt;tt&gt;Dispose()&lt;/tt&gt; before it is done using the &lt;tt&gt;TokenStream&lt;/tt&gt;, and call&#160;&lt;tt&gt;IncrementToken()&lt;/tt&gt; again.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The behavior can be observed in the&#160;&lt;tt&gt;Lucene.Net.Collation.TestICUCollationKeyFilter.TestCollationKeySort()&lt;/tt&gt; when the &lt;tt&gt;ICUCollationKeyFilter&lt;/tt&gt; implements &lt;tt&gt;Dispose()&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13244737">LUCENENET-611</key>
            <summary>TokenStream.IncrementToken() is called after Dispose() is called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                    </labels>
                <created>Sat, 13 Jul 2019 09:08:08 +0700</created>
                <updated>Fri, 10 Apr 2020 04:16:42 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="17080006" author="nightowl888" created="Fri, 10 Apr 2020 04:16:42 +0700"  >&lt;p&gt;It is possible that this issue was due to a bug in&#160;&lt;tt&gt;Lucene.Net.TestFramework&lt;/tt&gt; that has been addressed already. We need to confirm that it was the test framework that was errantly causing the double-call, not a feature of Lucene.NET.&lt;/p&gt;


&lt;p&gt;Also, the &lt;tt&gt;ICUCollationKeyFilter&lt;/tt&gt; no longer implements &lt;tt&gt;Dispose()&lt;/tt&gt; - that was when we were referencing icu-dotnet (which had unmanaged resources) instead of ICU4N. However, the behavior can be observed in any existing disposable &lt;tt&gt;TokenStream&lt;/tt&gt; or by overriding &lt;tt&gt;Dispose(bool)&lt;/tt&gt; in one that isn&apos;t disposable.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="13261620">LUCENENET-626</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 hours ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04my8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-610] Reduce locking in FieldCacheImpl::Cache::Get</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-610</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;We noticed a lot of contention in&#160;FieldCacheImpl::Cache::Get (our queries use a lot of query time joins + sorting, so we hit the field cache a lot).&lt;/p&gt;

&lt;p&gt;We use a SearcherManager with warm-up queries to populate the field cache so we would expect it to be initialized in most cases before we hit it for actual requests.&lt;/p&gt;

&lt;p&gt;The implementation seems to lock even for the happy path (when everything&apos;s already initialized). This seems like a by-product of the choice of data structures (the underlying WeakDictionary, WeakHashMap etc are not threadsafe) and so the locking is required in case the dictionary gets resized.&lt;/p&gt;

&lt;p&gt;Ideally we could be using thread-safe data structures and only lock when initializing the data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13244718">LUCENENET-610</key>
            <summary>Reduce locking in FieldCacheImpl::Cache::Get</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sthmathew">Thomas Mathew</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Sat, 13 Jul 2019 05:37:30 +0700</created>
                <updated>Tue, 14 Jan 2020 18:29:19 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16941150" author="nightowl888" created="Tue, 1 Oct 2019 00:17:53 +0700"  >&lt;p&gt;Thanks for the report. Could you please provide a reproduction case, either in the form of an integration test or a console app?&lt;/p&gt;</comment>
                            <comment id="16960423" author="nightowl888" created="Sun, 27 Oct 2019 03:07:03 +0700"  >&lt;p&gt;While having a thread safe collection would be ideal, that is not how it was implemented in Lucene. However, I took a look at the implementation of &lt;tt&gt;WeakDictionary&lt;/tt&gt; and it is dissimilar to that of the &lt;tt&gt;java.util.WeakHashMap&lt;/tt&gt; that was used in the OpenJDK. In particular the &lt;tt&gt;CleanIfNeeded()&lt;/tt&gt; method moves the entries from one dictionary instance to another every time it is called, which is less than ideal.&lt;/p&gt;

&lt;p&gt;According to &lt;a href=&quot;https://stackoverflow.com/a/2081664&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this StackOverflow answer&lt;/a&gt;, it may be possible to use a &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.conditionalweaktable-2?redirectedfrom=MSDN&amp;amp;view=netframework-4.8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ConditionalWeakTable&amp;lt;TKey,TValue&amp;gt;&lt;/a&gt; as a replacement.&lt;/p&gt;

&lt;p&gt;However, before it is attempted, it would be nice to have a reproduction case so it is possible to see whether we are indeed solving the issue or making it worse. Could you please provide one?&lt;/p&gt;</comment>
                            <comment id="17004701" author="nightowl888" created="Sun, 29 Dec 2019 15:06:52 +0700"  >&lt;p&gt;We have replaced WeakDictionary with ConditionalWeakTable in Lucene.NET 4.8.0-beta00007, but some of the APIs of ConditionalWeakTable that Lucene.NET requires are only available on .NET Standard 2.1.&lt;/p&gt;

&lt;p&gt;If you are using a platform that supports .NET Standard 2.1, could you please check out whether this change resolves the issue you are experiencing?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="13261636">LUCENENET-630</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13279124">LUCENENET-640</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13276522">LUCENENET-636</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Sep 2019 17:17:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04mu0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-598] NullReferenceException in DrillSideways.Search - ReqExclScorer.GetCost</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-598</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;We have migrated all our Lucene 3.0 code to Lucene 4.8. However &lt;br/&gt;
when searching with DrillSideways.Search we sometimes get a NullReferenceException with this stacktrace:&lt;/p&gt;

&lt;p&gt;System.NullReferenceException: Object reference not set to an instance of an object.&lt;br/&gt;
   at Lucene.Net.Search.ReqExclScorer.GetCost() in C:\BuildAgent\work\b1b63ca15b99dddb\src\Lucene.Net\Search\ReqExclScorer.cs:line 148&lt;br/&gt;
   at Lucene.Net.Facet.DrillSidewaysScorer.Score(ICollector collector, Int32 maxDoc) in C:\BuildAgent\work\b1b63ca15b99dddb\src\Lucene.Net.Facet\DrillSidewaysScorer.cs:line 139&lt;br/&gt;
   at Lucene.Net.Search.IndexSearcher.Search(IList`1 leaves, Weight weight, ICollector collector) in C:\BuildAgent\work\b1b63ca15b99dddb\src\Lucene.Net\Search\IndexSearcher.cs:line 649&lt;br/&gt;
   at Lucene.Net.Facet.DrillSideways.Search(DrillDownQuery query, ICollector hitCollector) in C:\BuildAgent\work\b1b63ca15b99dddb\src\Lucene.Net.Facet\DrillSideways.cs:line 194&lt;br/&gt;
   at Lucene.Net.Facet.DrillSideways.Search(ScoreDoc after, DrillDownQuery query, Int32 topN) in C:\BuildAgent\work\b1b63ca15b99dddb\src\Lucene.Net.Facet\DrillSideways.cs:line 249&lt;/p&gt;

&lt;p&gt;I managed to reproduce this in an unit test. If you add this unit test for example to TestDrillSideways.cs it will throw a NullReferenceException when running. This unit test should give 0 results because the criteria &quot;Age != 23 AND Name == &lt;b&gt;e&lt;/b&gt;&quot; matches nothing. However I sometimes have the same issue when the query returns multiple results but that is currently a bit harder to reproduce in a unit test.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        [Test]
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; virtual void TestFacetNRE()
        {
            Directory dir = NewDirectory();
            Directory taxoDir = NewDirectory();

            &lt;span class=&quot;code-comment&quot;&gt;// Writes facet ords to a separate directory from the
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// main index:
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; taxoWriter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DirectoryTaxonomyWriter(taxoDir, OpenMode.CREATE);

            FacetsConfig config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FacetsConfig();

            RandomIndexWriter writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RandomIndexWriter(Random(), dir, Similarity, TimeZone);

            Document doc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Document();
            doc.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;Name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;John&quot;&lt;/span&gt;, Documents.StringField.TYPE_STORED));
            doc.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;Age&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;19&quot;&lt;/span&gt;, Documents.StringField.TYPE_STORED));
            doc.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FacetField(&lt;span class=&quot;code-quote&quot;&gt;&quot;Function&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Developer&quot;&lt;/span&gt;));
            writer.AddDocument(config.Build(taxoWriter, doc));

            doc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Document();
            doc.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;Name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Steven&quot;&lt;/span&gt;, Documents.StringField.TYPE_STORED));
            doc.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;Age&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;23&quot;&lt;/span&gt;, Documents.StringField.TYPE_STORED));
            doc.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FacetField(&lt;span class=&quot;code-quote&quot;&gt;&quot;Function&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Sales&quot;&lt;/span&gt;));
            writer.AddDocument(config.Build(taxoWriter, doc));

            &lt;span class=&quot;code-comment&quot;&gt;// NRT open
&lt;/span&gt;            IndexSearcher searcher = NewSearcher(writer.Reader);

            &lt;span class=&quot;code-comment&quot;&gt;// NRT open
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; taxoReader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DirectoryTaxonomyReader(taxoWriter);

            DrillSideways ds = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DrillSideways(searcher, config, taxoReader);

            &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; query = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BooleanQuery(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            query.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TermQuery(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Term(&lt;span class=&quot;code-quote&quot;&gt;&quot;Age&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;23&quot;&lt;/span&gt;)), Occur.MUST_NOT);
            query.Add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WildcardQuery(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Term(&lt;span class=&quot;code-quote&quot;&gt;&quot;Name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;*e*&quot;&lt;/span&gt;)), Occur.MUST);

            &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; mydrillDownQuery = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DrillDownQuery(config, query);
            mydrillDownQuery.Add(&lt;span class=&quot;code-quote&quot;&gt;&quot;Function&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Developer&quot;&lt;/span&gt;);

            &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; z = ds.Search(mydrillDownQuery, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 10, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

            IOUtils.Dispose(searcher.IndexReader, taxoReader, writer, taxoWriter, dir, taxoDir);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13127977">LUCENENET-598</key>
            <summary>NullReferenceException in DrillSideways.Search - ReqExclScorer.GetCost</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="harold.harkema">Harold Harkema</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jan 2018 19:59:39 +0700</created>
                <updated>Mon, 21 Jan 2019 15:04:29 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net.Facet</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16747733" author="sisve" created="Mon, 21 Jan 2019 15:04:29 +0700"  >&lt;p&gt;This is the same problem as reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-6001&quot; title=&quot;DrillSideways throws NullPointerException for some searches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-6001&quot;&gt;&lt;del&gt;LUCENE-6001&lt;/del&gt;&lt;/a&gt; and will be fixed in Lucene.Net 4.10. There&apos;s no fixVersion for that yet, so I&apos;m removing the current 4.8 fixVersion.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Jan 2019 08:04:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3of5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-574] [Serializable] Classes</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-574</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;In Lucene.Net 3.0.3 several classes were marked with the &lt;span class=&quot;error&quot;&gt;&amp;#91;Serializable&amp;#93;&lt;/span&gt; attribute. The same has been done to several of the classes in the Lucene.Net (core), but most of the classes in the sub-projects are still not serializable.&lt;/p&gt;

&lt;p&gt;Some of the legacy tests that were carried over required certain classes to be serializable (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-170&quot; title=&quot;BooleanClause serialization fails owing to issues with serializing Occur object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-170&quot;&gt;&lt;del&gt;LUCENENET-170&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-338&quot; title=&quot;Serialized queries function unreliably&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-338&quot;&gt;&lt;del&gt;LUCENENET-338&lt;/del&gt;&lt;/a&gt;), which is how this issue was first discovered. &lt;/p&gt;

&lt;p&gt;At the very least, all Queries, Filters, and Analyzers should be marked &lt;span class=&quot;error&quot;&gt;&amp;#91;Serializable&amp;#93;&lt;/span&gt;, but it is unclear what criteria version 3.0.3 used to determine which other classes should be serializable. We need a clear strategy for this as well as the task to be done.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13062025">LUCENENET-574</key>
            <summary>[Serializable] Classes</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Thu, 6 Apr 2017 14:36:35 +0700</created>
                <updated>Sat, 12 Oct 2019 11:45:29 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16151094" author="nightowl888" created="Sat, 2 Sep 2017 03:23:03 +0700"  >&lt;p&gt;It turns out that per Microsoft, binary serialization is not meant for new applications, but only for helping with the transition from .NET Framework to .NET Core (&lt;a href=&quot;https://github.com/dotnet/corefx/issues/23584&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/dotnet/corefx/issues/23584&lt;/a&gt;)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;br/&gt;
It&apos;s crucial that we state as often as possible that binary serialization is not intended to be used for new applications but to make porting from Desktop to Core easier. There are tons of security concerns that are introduced by binary serialization, one of it is reading from a stream that could be compromised (network transferred date, e.g. in remoting).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So, it looks like the best &quot;strategy&quot; for this will be to leave the attribute off of ALL of the classes (including exceptions) except for those that explicitly require it in order for Lucene.Net to function. All legacy tests that verify serialization support should be disabled/removed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dabz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-562] Investigate whether C++ native directories are useful and can be ported</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-562</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;There are native C++ implementations of Directories along with wrapper classes in the Lucene.Net.Misc project under the Store namespace that have not been ported. We need to investigate whether these directories would be useful for .NET users and if so, port them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13061991">LUCENENET-562</key>
            <summary>Investigate whether C++ native directories are useful and can be ported</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nightowl888">Shad Storhaug</reporter>
                        <labels>
                            <label>features</label>
                            <label>investigation</label>
                            <label>up-for-grabs</label>
                    </labels>
                <created>Thu, 6 Apr 2017 13:03:36 +0700</created>
                <updated>Fri, 11 Oct 2019 02:09:38 +0700</updated>
                                            <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net.Misc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3da4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-547] Replace Spanish suffixes by Portuguese suffixes in the Portuguese snowball stemmer</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-547</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;On PortugueseStemmer.cs&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, there are a few suffixes in the PortugueseStemmer which I believe were copied by mistake from SpanishStemmer&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&quot;log\u00EDas&quot; should be &quot;logias&quot; (line 137)&lt;/li&gt;
	&lt;li&gt;&quot;log\u00EDa&quot; should be &quot;logia&quot; (line 113)&lt;/li&gt;
	&lt;li&gt;&quot;uciones&quot; should be &quot;u&#231;&#245;es&quot; (line 139)&lt;/li&gt;
	&lt;li&gt;&quot;uci\u00F3n&quot; should be &quot;u&#231;&#227;o&quot; (line 120)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For more details, see the original report on nltk project:&lt;br/&gt;
&lt;a href=&quot;https://github.com/nltk/nltk/issues/754&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/nltk/nltk/issues/754&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/lucene.net/blob/master/src/contrib/Snowball/SF/Snowball/Ext/PortugueseStemmer.cs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucene.net/blob/master/src/contrib/Snowball/SF/Snowball/Ext/PortugueseStemmer.cs&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/lucene.net/blob/master/src/contrib/Snowball/SF/Snowball/Ext/SpanishStemmer.cs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucene.net/blob/master/src/contrib/Snowball/SF/Snowball/Ext/SpanishStemmer.cs&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12748572">LUCENENET-547</key>
            <summary>Replace Spanish suffixes by Portuguese suffixes in the Portuguese snowball stemmer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="he7d3r">Helder</reporter>
                        <labels>
                            <label>stemmer</label>
                    </labels>
                <created>Thu, 16 Oct 2014 18:36:18 +0700</created>
                <updated>Thu, 29 Jun 2017 02:13:19 +0700</updated>
                                                                            <component>Lucene.Net Contrib</component>
                    <component>Lucene.Net.Analysis.Common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15998030" author="itamar" created="Fri, 5 May 2017 17:09:16 +0700"  >&lt;p&gt;This is also the case with Apache Lucene (Java):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.0/lucene/analysis/common/src/java/org/tartarus/snowball/ext/PortugueseStemmer.java#L84&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.0/lucene/analysis/common/src/java/org/tartarus/snowball/ext/PortugueseStemmer.java#L84&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I believe the right thing to do for Lucene.NET is leave it as-is, analyzers are expected to behave the same in .NET and Java - and as a by-product that will make indexes readable by both. It is easy enough to create your own analyzer by copying the code and fixing what needs to be fixed. It might make sense to also notify the Apache Lucene project so they can fix it in future releases.&lt;/p&gt;</comment>
                            <comment id="16067067" author="nightowl888" created="Thu, 29 Jun 2017 02:12:18 +0700"  >&lt;p&gt;Seems to be a reasonable request since its expected for Portuguese to work this way and contributing the fix directly to the Snowball project &lt;a href=&quot;https://github.com/snowballstem/snowball&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/snowballstem/snowball&lt;/a&gt; would literally take years to trickle down to Lucene and then Lucene.Net.&lt;/p&gt;

&lt;p&gt;Actually, I have already attempted this. It might work fine. However, this request doesn&apos;t have instructions anywhere on how to rework the ZIP file that are used for the tests to verify it works &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.0/lucene/analysis/common/src/test/org/apache/lucene/analysis/snowball/TestSnowballVocabData.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/4.8.0/lucene/analysis/common/src/test/org/apache/lucene/analysis/snowball/TestSnowballVocabData.zip&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Of course, without altering the ZIP file also (or instructions on how to alter it), the tests for the Portuguese stemmer fail. Any chance you can add that to this request?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 May 2017 10:09:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i218sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-491] Win 8 Metro Limitations</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-491</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;Ensure that Lucene.Net library can run in Metro&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/apps/br230302(v=vs.110).aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/apps/br230302(v=vs.110).aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/apps/br230232(v=vs.110).aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/apps/br230232(v=vs.110).aspx&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12558623">LUCENENET-491</key>
            <summary>Win 8 Metro Limitations</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pnasser">Prescott Nasser</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 May 2012 22:42:35 +0700</created>
                <updated>Fri, 11 Oct 2019 09:19:05 +0700</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13854946" author="itamar" created="Sun, 22 Dec 2013 04:58:22 +0700"  >&lt;p&gt;Prescott, this was discussed before in the mailing list. Are there any known issues at this point?&lt;/p&gt;

&lt;p&gt;Next step for me is to try and run in on my Windows 8 machine, but first I want to understand what I&apos;m getting myself into...&lt;/p&gt;</comment>
                            <comment id="16068079" author="nightowl888" created="Thu, 29 Jun 2017 16:39:43 +0700"  >&lt;p&gt;According to the .NET Standard page (&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/standard/net-standard&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.microsoft.com/en-us/dotnet/standard/net-standard&lt;/a&gt;), just being on .NET Standard 1.5 is enough to support Universal Windows Platform (which is where the &quot;develop&quot; link leads above).&lt;/p&gt;

&lt;p&gt;I have made an attempt to move us to .NET Standard 1.4 (which would get us there immediately), but this turns out is either not possible or very difficult because of missing APIs.&lt;/p&gt;

&lt;p&gt;Either way, we cannot verify this on Lucene.Net 4.8.0 until the support is in place (either by supporting .NET Standard 1.4 or waiting until UWP vNext), so I am leaving this open for now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13261680">LUCENENET-633</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Dec 2013 21:58:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02mqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-469] Convert Java Iterator classes to implement IEnumerable&lt;T&gt;</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-469</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;The Iterator pattern in Java is equivalent to IEnumerable in .NET.  Classes that were directly ported in Java using the Iterator pattern, cannot be used with Linq or foreach blocks in .NET.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Next()&lt;/tt&gt; would be equivalent to .NET&apos;s &lt;tt&gt;MoveNext()&lt;/tt&gt;, and in the below case, &lt;tt&gt;Term()&lt;/tt&gt; would be as .NET&apos;s &lt;tt&gt;Current&lt;/tt&gt; property.  In cases as below, it will require &lt;tt&gt;TermEnum&lt;/tt&gt; to become an abstract class with &lt;tt&gt;Term&lt;/tt&gt; and &lt;tt&gt;DocFreq&lt;/tt&gt; properties, which would be returned from another class or method that implemented &lt;tt&gt;IEnumerable&amp;lt;TermEnum&amp;gt;&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
	public abstract class TermEnum : IDisposable
	{
		public abstract bool Next();
		public abstract Term Term();
		public abstract int DocFreq();
		public abstract void  Close();
	        public abstract void Dispose();
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;would instead look something like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
	public class TermFreq
	{
		public abstract Term { get; }
		public abstract int { get; }
	}

        public abstract class TermEnum : IEnumerable&amp;lt;TermFreq&amp;gt;, IDisposable
        {
                // ...
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Keep in mind that it is important that if the class being converted implements &lt;tt&gt;IDisposable&lt;/tt&gt;, the class that is enumerating the terms (in this case &lt;tt&gt;TermEnum&lt;/tt&gt;) should inherit from both &lt;tt&gt;IEnumerable&amp;lt;T&amp;gt;&lt;/tt&gt; &lt;b&gt;and&lt;/b&gt; &lt;tt&gt;IDisposable&lt;/tt&gt;.  This won&apos;t be any change to the user, as the compiler automatically calls &lt;tt&gt;IDisposable&lt;/tt&gt; when used in a &lt;tt&gt;foreach&lt;/tt&gt; loop.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12539574">LUCENENET-469</key>
            <summary>Convert Java Iterator classes to implement IEnumerable&lt;T&gt;</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="12539570">LUCENENET-467</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ccurrens">Christopher Calvin Currens</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jan 2012 13:37:14 +0700</created>
                <updated>Fri, 25 Jan 2019 20:53:05 +0700</updated>
                                            <version>Lucene.Net 2.9.4</version>
                    <version>Lucene.Net 2.9.4g</version>
                    <version>Lucene.Net 3.0.3</version>
                    <version>Lucene.Net 4.8.0</version>
                                                    <component>Lucene.Net Contrib</component>
                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13291132" author="ccurrens" created="Fri, 8 Jun 2012 00:07:16 +0700"  >&lt;p&gt;This requires too much of an API change to implement in 3.0.3.  Unassigning from 3.0.3, and we can revisit it in a later release.&lt;/p&gt;</comment>
                            <comment id="15980582" author="nightowl888" created="Mon, 24 Apr 2017 06:49:46 +0700"  >&lt;p&gt;We should probably look into doing this. There are several places in the code base where the dispose pattern is not used correctly in conjunction with iterators/enumerators.&lt;/p&gt;

&lt;p&gt;I am not sure if it makes sense to make every type of iterator into an enumerator. For example BreakIterator is designed to navigate forward, backward, and to skip to specific points. Perhaps we could still implement IEnumerable&amp;lt;T&amp;gt; but also create other interfaces with extra functionality. In any case, this is a major API change that should be looked at before the 4.8.0 release.&lt;/p&gt;</comment>
                            <comment id="16118872" author="andypook" created="Wed, 9 Aug 2017 02:12:26 +0700"  >&lt;p&gt;How about something like...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TermEnum : IEnumerable&amp;lt;TermFreq&amp;gt;, IDisposable
	{
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; bool Next();
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; Term Term();
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; DocFreq();
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; void Close();
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; void Dispose();

		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; IEnumerator&amp;lt;TermFreq&amp;gt; GetEnumerator() =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EnumEnumerator&amp;lt;TermFreq&amp;gt;(Next, Dispose, () =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TermFreq { Term = Term(), DocFreq = DocFreq() });

		IEnumerator IEnumerable.GetEnumerator() =&amp;gt; GetEnumerator();
	}

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TermFreq
	{
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Term Term { get; set; }
		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; DocFreq { get; set; }
	}

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;EnumEnumerator&amp;lt;T&amp;gt; : IEnumerator&amp;lt;T&amp;gt;
	{
		&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; readonly Func&amp;lt;bool&amp;gt; next;
		&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; readonly Action dispose;
		&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; readonly Func&amp;lt;T&amp;gt; currentFactory;

		&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; bool started = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;

		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; EnumEnumerator(Func&amp;lt;bool&amp;gt; next, Action dispose, Func&amp;lt;T&amp;gt; currentFactory)
		{
			&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.next = next;
			&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.dispose = dispose;
			&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.currentFactory = currentFactory;
		}

		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; T Current =&amp;gt; started ? currentFactory() : &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;(T);

		object IEnumerator.Current =&amp;gt; Current;

		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; bool MoveNext() =&amp;gt; (started = next());

		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void Reset() =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NotImplementedException();

		&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void Dispose() =&amp;gt; dispose();
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Excuse the c#7 lambda stuff, just used for brevity. Would expand if theory accepted.&lt;/p&gt;

&lt;p&gt;The idea is to have a default generic Enumerator which can be used for any Iterator type. So, simply add the IEnumerable i/f and the two GetEnumerator methods returning the generic. It takes Next, Dispose and a factory to create the items.&lt;br/&gt;
The started member is to emulate the enumerator semantic of being null before the first call to MoveNext.&lt;br/&gt;
Enum&apos;s aren&apos;t resetable so just throw?&lt;br/&gt;
In this example I&apos;ve kept the item type simple. But it would probably be implemented as an immutable.&lt;/p&gt;

&lt;p&gt;Observation: There don&apos;t seem to be many Enum types (those that have &lt;tt&gt;bool Next()&lt;/tt&gt;) I&apos;m assuming other have already been converted?&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="16119439" author="nightowl888" created="Wed, 9 Aug 2017 12:43:29 +0700"  >&lt;p&gt;The types I am aware of are the &lt;tt&gt;TermsEnum&lt;/tt&gt; and &lt;tt&gt;DocIdSetIterator&lt;/tt&gt; and their subclasses (which include &lt;tt&gt;DocsEnum&lt;/tt&gt; and &lt;tt&gt;DocsAndPositionsEnum&lt;/tt&gt; classes). There are probably a few others. Anything that is not public facing isn&apos;t worth the effort of refactoring, so there isn&apos;t much after these that haven&apos;t already been converted.&lt;/p&gt;

&lt;p&gt;BTW - there is no longer a &lt;tt&gt;TermEnum&lt;/tt&gt; class in Lucene 4+ - it has been replaced with &lt;tt&gt;TermsEnum&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The issue isn&apos;t so much with implementing &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt; as the fact that once you use a foreach loop and it calls &lt;tt&gt;GetEnumerator()&lt;/tt&gt;, there would need to be a cast to get to the functionality other than &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt;. And inside of a foreach loop you don&apos;t have access to the &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt; instance, so there is no way to cast to get the rest of the functionality. &lt;/p&gt;

&lt;p&gt;I looked at &lt;tt&gt;TermsEnum&lt;/tt&gt; in some depth and I think the best solution there would be to divide it into &quot;basic&quot; and &quot;advanced&quot; APIs. Simply rename &lt;tt&gt;Terms.GetIterator(BytesRef)&lt;/tt&gt; to &lt;tt&gt;Terms.GetEnumerator(BytesRef)&lt;/tt&gt; and add an overload that accepts no parameter and satisfies the &lt;tt&gt;IEnumerable&amp;lt;T&amp;gt;&lt;/tt&gt; contract that internally calls &lt;tt&gt;Terms.GetEnumerator(null)&lt;/tt&gt;. The overload that accepts a parameter can then return a &lt;tt&gt;TermsEnum&lt;/tt&gt; type, which will expose the additional members that are hidden in the .NETified overload.&lt;/p&gt;

&lt;p&gt;Since a common use case is to loop forward, this would simplify some code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Terms vector = &amp;lt;something&amp;gt;
TermsEnum termsEnum = vector.GetIterator(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
BytesRef text;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((text = termsEnum.Next()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
{
	&lt;span class=&quot;code-comment&quot;&gt;// use text
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;becomes&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Terms vector = &amp;lt;something&amp;gt;
foreach (BytesRef text in vector)
{
	&lt;span class=&quot;code-comment&quot;&gt;// use text
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But you could also call &lt;tt&gt;GetEnumerable(BytesRef)&lt;/tt&gt; in order to reuse a &lt;tt&gt;BytesRef&lt;/tt&gt; or to get to all of &lt;tt&gt;TermsEnum&lt;/tt&gt; s goodies that aren&apos;t part of the &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt; contract.&lt;/p&gt;

&lt;p&gt;I don&apos;t think this same approach will work for &lt;tt&gt;DocsEnum&lt;/tt&gt; or &lt;tt&gt;DocsAndPositionsEnum&lt;/tt&gt; - it would be nice to find a solution that can be applied consistently. I am not so sure those types fit the mold of &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt; anyway, but perhaps there is some way to refactor them to fit.&lt;/p&gt;

&lt;p&gt;Then again, there must be some reason why the Lucene designers strayed away from using &lt;tt&gt;Iterable&amp;lt;T&amp;gt;&lt;/tt&gt; in this part of the design - they may have intentionally done it this way for some odd reason.&lt;/p&gt;</comment>
                            <comment id="16119447" author="nightowl888" created="Wed, 9 Aug 2017 12:52:58 +0700"  >&lt;p&gt;Oh, one more thing. I was planning on getting to this after the next beta release. There are several bug fixes, optimizations, and 5 new NuGet packages I would like to push out (and hopefully the API docs) before getting to these breaking API changes.&lt;/p&gt;</comment>
                            <comment id="16119630" author="andypook" created="Wed, 9 Aug 2017 16:35:38 +0700"  >&lt;p&gt;So I have a little time to get into this then &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Probably nothing new here to you. Mainly just me catching up...&lt;/p&gt;

&lt;p&gt;To your first point about GetEnumerator being somewhat hidden/opaque, isn&apos;t that just something that is the usual guidance in c#. ie don&apos;t mess with the collection from inside a for cos you&apos;ll break the enumerator.&lt;/p&gt;

&lt;p&gt;In the fairly simple case in the code above you could...&lt;br/&gt;
(NB just using TermEnum as it&apos;s a simple example)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TermEnum vector = &amp;lt;something&amp;gt;
foreach (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; item in vector)
{
	&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = vector.Term();
	&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; y = item.Term;  &lt;span class=&quot;code-comment&quot;&gt;// same thing as &lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt;
&lt;/span&gt;	vector.DoStuff();
	&lt;span class=&quot;code-comment&quot;&gt;// but you should probably steer clear of using &lt;span class=&quot;code-quote&quot;&gt;&apos;Next()&apos;&lt;/span&gt;
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There&apos;s no need to extend/cast or get access to the enumerator. The enumerators job is to simply move a cursor forwards and support a language construct.&lt;br/&gt;
Of course this would make it still look weird to a c#/vb dev.&lt;br/&gt;
&lt;tt&gt;Current&lt;/tt&gt; is supposed to return the current value of the cursor. Maybe it could return Current as the collection (&apos;vector&apos; above). So it would look like...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TermEnum vector = &amp;lt;something&amp;gt;
foreach (TermEnum item in vector)
{
	&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; x = item.Term();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Again, weird. Doing the method -&amp;gt; property change would help. But, still feels odd to have the item being the same thing as vector.&lt;/p&gt;

&lt;p&gt;Here lies the basic problem. The Lucene &quot;iterable&quot; classes represent all of: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the collection
	&lt;ul&gt;
		&lt;li&gt;stepping the cursor&lt;/li&gt;
		&lt;li&gt;collection scope behaviors for the type&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;the current item within the collection
	&lt;ul&gt;
		&lt;li&gt;&quot;properties&quot;&lt;/li&gt;
		&lt;li&gt;item scope behaviors&lt;br/&gt;
Not only that but there are also different implementations of the pattern with different semantics. ie &lt;tt&gt;Next()&lt;/tt&gt; returns success; &lt;tt&gt;NextDoc()&lt;/tt&gt; returns an id or magic number; &lt;tt&gt;Advance(target)&lt;/tt&gt; spin forward to target&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, the need to allow the Current item to be; created on each iteration; reused; fetch from object pool; ...&lt;br/&gt;
I&apos;m fairly sure that the EnumEnumerator (or versions of) can handle all that. I&apos;d need to get further into the use cases.&lt;/p&gt;

&lt;p&gt;Lastly, there&apos;s the observation that the &lt;tt&gt;while&lt;/tt&gt; vs &lt;tt&gt;foreach&lt;/tt&gt; examples you gave are not equivalent as the while version does not call &lt;tt&gt;Dispose()&lt;/tt&gt;. &lt;br/&gt;
I suspect that in current usage Dispose is never called. Or if it is it&apos;s because it&apos;s associated with files rather than because we&apos;re leaving a loop. Does that match your experience?&lt;br/&gt;
Thinking about it, maybe the enumerator Dispose should be a noop? It&apos;s odd for a type to be disposing it&apos;s &quot;parent&quot; (though I know some StreamWriter/Reader classes do, it&apos;s still odd/annoying). Again there&apos;s a scoping concept here that&apos;s muddled by the type being many things.&lt;/p&gt;

&lt;p&gt;All very Tricky...&lt;/p&gt;

&lt;p&gt;I think there&apos;s some combination of&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;isolating the &quot;item&quot; type&lt;/li&gt;
	&lt;li&gt;using the collection object behaviors from inside the loop&lt;/li&gt;
	&lt;li&gt;implementing the enumerator such that it is ok about the cursor being changed from outside&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It&apos;s going to be very hard to get the semantics of each type in a sane shape such that it&apos;s hard for a dev to get tripped up.&lt;br/&gt;
Which is why this have been open for 5+ years &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll see if I can put together a proof of concept PR&lt;/p&gt;</comment>
                            <comment id="16119974" author="nightowl888" created="Wed, 9 Aug 2017 21:22:44 +0700"  >&lt;p&gt;No problem. I am just a bit surprised given the choice for some prime green field development vs this headache that you would choose this path. But nonetheless, my aching head thanks you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;By now you have probably worked out that &lt;tt&gt;IBytesRefIterator&lt;/tt&gt; should inherit &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt; and that implementing that interface isn&apos;t much more complicated than dividing the 1 &lt;tt&gt;BytesRef Next();&lt;/tt&gt; method into &lt;tt&gt;bool MoveNext();&lt;/tt&gt; and &lt;tt&gt;BytesRef Current { get;&lt;/tt&gt;}. The other fun stuff such as &lt;tt&gt;SeekCeil()&lt;/tt&gt; and &lt;tt&gt;SeekExact()&lt;/tt&gt; most likely won&apos;t be affected. And yes, this means the &lt;tt&gt;Dispose()&lt;/tt&gt; method should be a no-op in our case, but who knows, maybe it won&apos;t be in a subclass somewhere - just make sure to put in the dispose pattern so we are covered.&lt;/p&gt;

&lt;p&gt;The only real trick is ensuring the other methods on &lt;tt&gt;TermsEnum&lt;/tt&gt; and its subclasses are exposed when implementing the &lt;tt&gt;IEnumerable&amp;lt;BytesRef&amp;gt;&lt;/tt&gt; on &lt;tt&gt;Terms&lt;/tt&gt; (and anybody else using &lt;tt&gt;TermsEnum&lt;/tt&gt;). As I mentioned before, I think overloading &lt;tt&gt;GetEnumerator()&lt;/tt&gt; with a method that returns the &lt;tt&gt;TermsEnum&lt;/tt&gt; type is the solution there. But, that probably doesn&apos;t take into account any subclasses of &lt;tt&gt;Terms&lt;/tt&gt; that have a different type of iterator returned from their &lt;tt&gt;GetIterator()&lt;/tt&gt; method than the abstract class &lt;tt&gt;TermsEnum&lt;/tt&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Lastly, there&apos;s the observation that the while vs foreach examples you gave are not equivalent as the while version does not call Dispose(). &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is just because &lt;tt&gt;TermsEnum&lt;/tt&gt; doesn&apos;t implement &lt;tt&gt;IDisposable&lt;/tt&gt; yet. Of course, that all changes when implementing &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt;...&lt;/p&gt;

&lt;p&gt;And there are several places throughout the codebase where enumerators are utilized without a using block or calling &lt;tt&gt;Dispose()&lt;/tt&gt;. The tests aren&apos;t such a big concern, but we really shouldn&apos;t be doing this in the production code. I am sure there are some places where you can put your own implementation with its own unmanaged resources and watch the resource leaks pile up because we aren&apos;t doing our job and calling &lt;tt&gt;Dispose()&lt;/tt&gt;. The real trick is locating them. I really wish Microsoft would put a feature in Visual Studio that searches for code that should exist but doesn&apos;t &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Then again, I haven&apos;t been using Code Analysis. Maybe that (or Resharper?) can be used to quickly detect all of the &lt;tt&gt;Dispose()&lt;/tt&gt; violations. If you can find them, maybe that is a PR that should go ahead of the refactoring.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It&apos;s odd for a type to be disposing it&apos;s &quot;parent&quot; (though I know some StreamWriter/Reader classes do, it&apos;s still odd/annoying).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed - when using &lt;tt&gt;Dispose()&lt;/tt&gt; in conjunction with the decorator pattern things get odd. But how does that apply to &lt;tt&gt;TermsEnum&lt;/tt&gt;? Disposing a superclass is not quite the same thing (and is rather expected using the dispose pattern).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;All very Tricky...&lt;/p&gt;

&lt;p&gt;I think there&apos;s some combination of&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;isolating the &quot;item&quot; type&lt;/li&gt;
	&lt;li&gt;using the collection object behaviors from inside the loop&lt;/li&gt;
	&lt;li&gt;implementing the enumerator such that it is ok about the cursor being changed from outside&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;It&apos;s going to be very hard to get the semantics of each type in a sane shape such that it&apos;s hard for a dev to get tripped up.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In Java the &quot;item&quot; type is usually the one that is returned from the &lt;tt&gt;Next()&lt;/tt&gt; method. But the real issue is all of the &quot;extras&quot; that come along with these iterators and how to expose them without casting the result of &lt;tt&gt;GetEnumerator()&lt;/tt&gt;. Keep in mind the &quot;extras&quot; (ala LINQ) are usually part of the &lt;tt&gt;IEnumerable&amp;lt;T&amp;gt;&lt;/tt&gt; not part of the &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt;. Maybe trying to expose the &quot;extras&quot; is the wrong approach altogether. Maybe those &quot;extras&quot; are crying out to be refactored into services of their own that are separate from the enumerator.&lt;/p&gt;

&lt;p&gt;If you go that route, note that because we are a port we had to redefine what &quot;maintainable&quot; means. So, when refactoring a class into many, the typical approach I follow is to drop all of that code into the same code file that is being refactored (in the same order as much as possible). This will make it easy to figure out where that code is when upgrading to the next Lucene version. The standard approach of putting each type into a file on its own would be chaos for a port version upgrade.&lt;/p&gt;

&lt;p&gt;But you seem to have a handle on things. If there is a solution to be found here, I am sure you will be able to find it. If you need a sounding board to run your ideas by, I am here.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Which is why this have been open for 5+ years &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yea, I bet the decision to wait until the &quot;next release&quot; was a decision that came with some regret. Unfortunately, Lucene.Net struggled to get over the hump of getting a 4.x release because the project grew by a factor of 10. We are almost there now, and the path to catch up to Lucene 6.x is now clear considering how much smaller the change set is between here and there than the monster change set between 3.x and 4.x.&lt;/p&gt;</comment>
                            <comment id="16120064" author="andypook" created="Wed, 9 Aug 2017 22:20:04 +0700"  >&lt;p&gt;Yeah, well, I thought, that&apos;s looks like it might be isolated, small. Ha!&lt;br/&gt;
I&apos;ll poke at it some more, see what turns up. But I may just punt and look for something else &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure I&apos;m on the same wave length just yet...&lt;/p&gt;

&lt;p&gt;&quot;how does that apply to TermsEnum? Disposing a superclass is not quite the same thing&quot;&lt;br/&gt;
But the enumerator is not a super class. It&apos;s a &quot;child&quot; of the TermsEnum (or whatever) created for a purpose. Disposing the child shouldn&apos;t dispose the &quot;parent&quot;. I&apos;m fairly sure that IEnumerator has Dispose so that things like listing files (managed resource) can be cleaned up. But still, it&apos;s about cleaning up resources used by the enumerator &lt;em&gt;not&lt;/em&gt; by the parent collection type.&lt;br/&gt;
If you want to Dispose the collection type then that&apos;s a separate operation. There may be other behaviors available, appropriate on the collection type &lt;em&gt;after&lt;/em&gt; you&apos;ve looped some aspect of it.&lt;br/&gt;
Right ??&lt;/p&gt;

&lt;p&gt;Also a bit confused around the &quot;extras&quot; topic. I don&apos;t see the problem. We&apos;d get all the linq bits for free. You&apos;re right, they are generally defined on &lt;tt&gt;IEnumerable&amp;lt;T&amp;gt;&lt;/tt&gt; But that&apos;s fine. In your example of &lt;tt&gt;TermsEnum&lt;/tt&gt; being &lt;tt&gt;IEnumerable&amp;lt;BytesRef&amp;gt;&lt;/tt&gt; then regardless of how the enumerator is factored you can still do &lt;tt&gt;foreach(var item in termsEnum.Where(b=&amp;gt;b.Length&amp;gt;100))&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I was thinking by &quot;extras&quot; you meant &quot;other things on the collection type&quot;. By my theory those are either: part of the item and exposed there; or an op you call in the collection object from inside the loop.&lt;/p&gt;

&lt;p&gt;What am I missing?&lt;/p&gt;</comment>
                            <comment id="16120295" author="nightowl888" created="Thu, 10 Aug 2017 00:19:36 +0700"  >&lt;p&gt;Ahh...I think I now know where we are getting our wires crossed.&lt;/p&gt;

&lt;p&gt;You have become a victim of the Java developers&apos; incessant need to abbreviate everything (which annoys the crap out of me, but unfortunately fixing it is a losing battle). &lt;/p&gt;

&lt;p&gt;Essentially, &lt;tt&gt;TermsEnum&lt;/tt&gt; == &lt;tt&gt;IEnumerator&amp;lt;BytesRef&amp;gt;&lt;/tt&gt;, &lt;tt&gt;TermsEnum&lt;/tt&gt; != &lt;tt&gt;IEnumerable&amp;lt;BytesRef&amp;gt;&lt;/tt&gt;. &quot;Enum&quot; could be interpreted as either one, hence the misunderstanding (hell, come to think of it, it could even be misinterpreted as an enumeration).&lt;/p&gt;

&lt;p&gt;So, rather than loading up the &lt;tt&gt;IEnermerable&amp;lt;BytesRef&amp;gt;&lt;/tt&gt; with all kinds of useful stuff like LINQ does, our Lucene friends have loaded up a &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;&lt;/tt&gt; (or not - they didn&apos;t actually implement Java&apos;s analogue to this) with stuff that most &lt;tt&gt;IEnumerator&lt;/tt&gt; s don&apos;t do. Which of course is leaving us scratching our heads.&lt;/p&gt;

&lt;p&gt;So, when disposing &lt;tt&gt;TermsEnum&lt;/tt&gt;, we are doing the standard &lt;tt&gt;IEnumerator&amp;lt;T&amp;gt;.Dispose()&lt;/tt&gt; stuff that the foreach loop does not some funky other relationship. The &lt;tt&gt;Terms&lt;/tt&gt; class is essentially the &lt;tt&gt;IEnumerable&amp;lt;BytesRef&amp;gt;&amp;gt;&lt;/tt&gt; that we are enumerating over.&lt;/p&gt;</comment>
                            <comment id="16120444" author="andypook" created="Thu, 10 Aug 2017 01:43:53 +0700"  >&lt;p&gt;Yes, agreed. I think I wasn&apos;t quite using the right words to disambiguate.&lt;/p&gt;

&lt;p&gt;So... take a breath... lots of Esomething words coming....&lt;/p&gt;

&lt;p&gt;Yes, the Enum types have the characteristics of a c# IEnumerator (Next() etc).&lt;br/&gt;
But also represent the current item (via Term etc).&lt;br/&gt;
But also has additional &quot;collection&quot; type operations (&lt;tt&gt;SeekExact()&lt;/tt&gt; etc) (are these part of what you were referring to as &quot;extras&quot;?).&lt;br/&gt;
It&apos;s this Enum class I was calling the &quot;collection&quot; type &apos;cos it kind of holds the collection state.&lt;/p&gt;

&lt;p&gt;What I was proposing was to make the Enum also look like an IEnumerable so that you can &lt;tt&gt;foreach&lt;/tt&gt; over it.&lt;br/&gt;
Which means it needs a &lt;tt&gt;GetEnumerable()&lt;/tt&gt; to return an IEnumerator. This new enumerator is the &lt;tt&gt;EnumEnumerator&lt;/tt&gt; type from in previous messages.&lt;/p&gt;

&lt;p&gt;So, I&apos;m taking an Enum, adding an IEnumerable facade, to return a new IEnumerable type which pokes the Enum to move forward.&lt;/p&gt;

&lt;p&gt;It was the &lt;tt&gt;Dispose()&lt;/tt&gt; of this new IEnumerator that I was referring to. Pretty convinced that this one should always be a no-op. Exiting the loop should not Dispose the Enum (ie the &quot;collection&quot;) and as the new IEnumerator is just poking methods on the Enum, there&apos;s nothing for it to clean up.&lt;/p&gt;

&lt;p&gt;Pretty sure I&apos;ve got all the right E&apos;s in the right place &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;NB: some thought would be needed to define what the &quot;item&quot; class (representing Current) should look like in each case.&lt;br/&gt;
NB: Calling a Current changing method (ie one of the Seek...() methods) from inside a foreach would result in undefined behavior.&lt;/p&gt;

&lt;p&gt;Phew... Did that make sense; fit with your view of the universe?&lt;/p&gt;</comment>
                            <comment id="16120627" author="nightowl888" created="Thu, 10 Aug 2017 03:40:10 +0700"  >&lt;blockquote&gt;&lt;p&gt;It&apos;s this Enum class I was calling the &quot;collection&quot; type &apos;cos it kind of holds the collection state.&lt;/p&gt;

&lt;p&gt;What I was proposing was to make the Enum also look like an IEnumerable so that you can foreach over it.&lt;br/&gt;
Which means it needs a GetEnumerable() to return an IEnumerator. This new enumerator is the EnumEnumerator type from in previous messages.&lt;/p&gt;

&lt;p&gt;So, I&apos;m taking an Enum, adding an IEnumerable facade, to return a new IEnumerable type which pokes the Enum to move forward.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is an interesting idea.&lt;/p&gt;

&lt;p&gt;I am not sure if the state is actually being &quot;iterated over&quot; so much as it is being calculated on the fly. But then, &lt;tt&gt;IEnumerable&amp;lt;T&amp;gt;&lt;/tt&gt; is just an interface - it doesn&apos;t actually define any behavior. In fact, I had to redefine what the key and value &lt;tt&gt;ICollection&amp;lt;T&amp;gt;&lt;/tt&gt; s do in CharArrayMap&apos;s KeyCollection and ValueCollection, so maybe this is also possible.&lt;/p&gt;

&lt;p&gt;&amp;gt; NB: some thought would be needed to define what the &quot;item&quot; class (representing Current) should look like in each case.&lt;br/&gt;
&amp;gt; NB: Calling a Current changing method (ie one of the Seek...() methods) from inside a foreach would result in undefined behavior.&lt;/p&gt;

&lt;p&gt;So then we end up with some behavior that doesn&apos;t fit the mold.&lt;/p&gt;

&lt;p&gt;I thought for a moment that it could be possible these SeekCeil and SeekExact methods are only defined here because there are no such thing as extension methods in Java, but since they are overridden in subclasses, that is probably not a valid assumption.&lt;/p&gt;

&lt;p&gt;Speaking of which, I suggest you have a look at how they are used in the TermsEnum overloads in the codecs (for example &lt;span class=&quot;error&quot;&gt;&amp;#91;Lucene40TermVectorsReader&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/lucenenet/blob/468199e3fa95c7e1f77b14e7f00aeaafd7c2f8b9/src/Lucene.Net/Codecs/Lucene40/Lucene40TermVectorsReader.cs#L446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucenenet/blob/468199e3fa95c7e1f77b14e7f00aeaafd7c2f8b9/src/Lucene.Net/Codecs/Lucene40/Lucene40TermVectorsReader.cs#L446&lt;/a&gt;)) or &lt;span class=&quot;error&quot;&gt;&amp;#91;Lucene45DocValuesProducer.TermsEnumAnonymousInnerClassHelper&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/lucenenet/blob/468199e3fa95c7e1f77b14e7f00aeaafd7c2f8b9/src/Lucene.Net/Codecs/Lucene45/Lucene45DocValuesProducer.cs#L1090&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucenenet/blob/468199e3fa95c7e1f77b14e7f00aeaafd7c2f8b9/src/Lucene.Net/Codecs/Lucene45/Lucene45DocValuesProducer.cs#L1090&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;As you can see, the complexity of these enums becomes quite high (lots of internal state), and it seems to me it would be simpler to port future changes from Lucene if the general structure of the &quot;extras&quot; (that is, the properties and Seek* methods) were left alone (or at least left intact and used by some other type of facade). The DocsAndPositionsEnum s are even more complex than this.&lt;/p&gt;

&lt;p&gt;The only thing I was hoping to get out of this was the added ability to use a foreach loop on Terms (and possibly the DocIdSetIterator). Sure we could refactor the TermsEnum data structure to be more .NET-like, but then where would we be when we need to connect the dots on the next Lucene upgrade? I am not necessarily against it, but finding bugs in the codec code is no picnic, so we would need some clear way to ensure future codecs behavior can be mapped onto the new structure without causing too much pain. Keep in mind, the codecs change in every major (and nearly every minor) version.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Phew... Did that make sense; fit with your view of the universe?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wow, do I sound so closed minded? I think I need to work on my delivery &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. &lt;/p&gt;</comment>
                            <comment id="16121275" author="andypook" created="Thu, 10 Aug 2017 15:45:53 +0700"  >&lt;blockquote&gt;&lt;p&gt;Wow, do I sound so closed minded?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ha. No not at all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; more worried I just not seeing the whole picture.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;not sure if the state is actually being &quot;iterated over&quot; ... &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Well, in so far as &lt;tt&gt;Next&lt;/tt&gt; moves a set of values one step forward, it can certainly be thought of that way. I think of these like a cursor over a sql table. You can foreach over the rows. How the data is actually retrieved is abstracted. It could be one at a time, batches, all of them, cached... At the foreach level you just call Next to inspect the values of the next item.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;tt&gt;IEnumerable&amp;lt;T&amp;gt;&lt;/tt&gt; is just an interface - it doesn&apos;t actually define any behavior.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Right, this is one of those language syntax enabling things. You actually don&apos;t need to specify the interface. As long as the class implements &lt;tt&gt;GetEnumerator()&lt;/tt&gt; then foreach will work. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So then we end up with some behavior that doesn&apos;t fit the mold.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;True. But that&apos;s completely normal.&lt;br/&gt;
Imagine an enumerator over a Stream that pulls a line of text at a time. What would happen if you called &lt;tt&gt;myStream.Seek(...)&lt;/tt&gt; inside the loop? Or a foreach over a Dictionary and call &lt;tt&gt;myDictionary.Add(...)&lt;/tt&gt;? The behavior is to either throw (because the Dictionary.Enumerator protects against this) or some undefined behavior depending on which Stream/Reader or underlying storage is being used. Having overridden implementations with different behaviors is also to be expected. Many hours of fun to be had following Stream/TextReader etc. There&apos;s no guarantee that descendant classes will have similar behavior at he edges.&lt;/p&gt;

&lt;p&gt;My theory was to enable foreach that would produce items representing the values of the Enum that change when its Next is called. This would be entirely an overlay/facade. All the existing members would remain presenting a dual api.&lt;br/&gt;
This way copy/pasting code from Java is still possible (modulo c# style properties). But the while style can be refactored to foreach. Or green field dev can be done in whichever style the dev likes.&lt;/p&gt;

&lt;p&gt;All linq style stuff will work. I don&apos;t think the &quot;extra&quot; (Seek etc) are a problem. Most of them aren&apos;t composable as they return a single item or perfrom some op over the &quot;collection&quot;. I mean for example you probably wouldn&apos;t call &lt;tt&gt;SeekExact&lt;/tt&gt; from inside a foreach, in the same way you would use a dictionary indexer if you were foreach&apos;ing over it. Or call &lt;tt&gt;Sort&lt;/tt&gt; inside a foreach over a List.&lt;br/&gt;
Those that are composable (ie the various &lt;tt&gt;Docs&lt;/tt&gt; methods) will work (assuming the &lt;tt&gt;DocsEnum&lt;/tt&gt; is converted. So you could image &lt;tt&gt;terms.Docs(...).Where(d=&amp;gt;...).Select(...)&lt;/tt&gt; working. But I would expect them to be at the beginning of the chain.&lt;br/&gt;
I guess you could image a few extra linq style extensions for special cases. But once you&apos;re into enumerable land it does cause some restrictions. Unless you want to get into rewriting expressions trees (runs away screaming).&lt;/p&gt;

&lt;p&gt;You are quite right, trying to fit this in such that it&apos;s consistent across the class hierarchies is going to be a challenge for sure &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m away this weekend but I&apos;ll try to put together a PR with a few examples/tests new week to see if it&apos;ll work out.&lt;/p&gt;</comment>
                            <comment id="16126559" author="githubbot" created="Tue, 15 Aug 2017 05:47:01 +0700"  >&lt;p&gt;GitHub user AndyPook opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucenenet/pull/212&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucenenet/pull/212&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-469&quot; title=&quot;Convert Java Iterator classes to implement IEnumerable&amp;lt;T&amp;gt;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-469&quot;&gt;LUCENENET-469&lt;/a&gt; - enumerables&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/projects/LUCENENET/issues/LUCENENET-469&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/LUCENENET/issues/LUCENENET-469&lt;/a&gt; for background.&lt;/p&gt;

&lt;p&gt;    This is an early stage proposal for implementing IEnumerable&amp;lt;T&amp;gt; on various &quot;Enum&quot; types. To enable `foreach` and linq style operators.&lt;/p&gt;

&lt;p&gt;    This prototype provides `EnumEnumerator&amp;lt;T&amp;gt;` as a helper. It can be used in various ways to make the implementation of `IEnumerable&amp;lt;T&amp;gt;` more straightforward.&lt;/p&gt;

&lt;p&gt;    I have modified `IBytesRefIterator` and `TermsEnum` to add `IEnumerable&amp;lt;BytesRef&amp;gt;` and therefore to all of it&apos;s descendants.&lt;/p&gt;

&lt;p&gt;    The test (such as it is) demonstrates retrieving a `TermsEnum` from a reader. Then using `foreach` and a simple `.Count()` linq operator.&lt;/p&gt;

&lt;p&gt;    If this approach is acceptable it ought to be adaptable to other Enum types&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/AndyPook/lucenenet&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/AndyPook/lucenenet&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENENET-469&quot; title=&quot;Convert Java Iterator classes to implement IEnumerable&amp;lt;T&amp;gt;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENENET-469&quot;&gt;LUCENENET-469&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucenenet/pull/212.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucenenet/pull/212.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #212&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 008df498bcba7e9940ca97efc83d656ddb03b2c3&lt;br/&gt;
Author: Andy Pook &amp;lt;andy.pook@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-14T21:32:45Z&lt;/p&gt;

&lt;p&gt;    simple editorconfig&lt;/p&gt;

&lt;p&gt;    ensures spaces for indent&lt;/p&gt;

&lt;p&gt;commit 59646be0cf8fbc7e8ad64f395f451a11aca57fc6&lt;br/&gt;
Author: Andy Pook &amp;lt;andy.pook@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-14T21:34:48Z&lt;/p&gt;

&lt;p&gt;    add EnumEnumerator helper&lt;/p&gt;

&lt;p&gt;commit 526ddaf8c837f82cd141324e922372155914701b&lt;br/&gt;
Author: Andy Pook &amp;lt;andy.pook@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-14T21:35:32Z&lt;/p&gt;

&lt;p&gt;    add IEnumerable to TermsEnum/IBytesRefArray&lt;/p&gt;

&lt;p&gt;commit 456df8e8347ef67055b712722b50cc3b1bbf26cc&lt;br/&gt;
Author: Andy Pook &amp;lt;andy.pook@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-14T21:36:54Z&lt;/p&gt;

&lt;p&gt;    add header, fix usings&lt;/p&gt;

&lt;p&gt;commit 1a1c25da7cbcd112d12d6c418c669786cdf4088c&lt;br/&gt;
Author: Andy Pook &amp;lt;andy.pook@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-08-14T22:25:15Z&lt;/p&gt;

&lt;p&gt;    add example test&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16126563" author="andypook" created="Tue, 15 Aug 2017 05:48:46 +0700"  >&lt;p&gt;added PR &lt;a href=&quot;https://github.com/apache/lucenenet/pull/212&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/lucenenet/pull/212&lt;/a&gt; which I am sure will need a lot of work. The intent at this point is to just demonstrate the approach&lt;/p&gt;</comment>
                            <comment id="16752276" author="laimis" created="Fri, 25 Jan 2019 20:53:05 +0700"  >&lt;p&gt;Removing fix version of 4.8. This is a general lucene.net task and we should not delay 4.8 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 23 Apr 2017 23:49:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ml3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[LUCENENET-467] .NETify the public API where appropriate</title>
                <link>https://issues.apache.org/jira/browse/LUCENENET-467</link>
                <project id="12310290" key="LUCENENET">Lucene.Net</project>
                    <description>&lt;p&gt;Although we haven&apos;t abandoned the line-by-line port of Java lucene, there are many idioms in Java that make little to no sense in a .NET assembly.  The API can change to allow for a conventional .NET experience, while still maintaining the ability and ease during the porting process of Java logic.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Change Getxxx() and Setxxx() methods to .NET Properties&lt;/li&gt;
	&lt;li&gt;Implement the &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;dispose pattern&lt;/a&gt; properly.  Try, at all costs, to only use finalizers &lt;b&gt;when necessary&lt;/b&gt;.  They are expensive, and most of the classes used already have finalizers that will be called.&lt;/li&gt;
	&lt;li&gt;Convert Java Iterator-style classes (see TermEnum, TermDocs and others) to implement IEnumerable&amp;lt;T&amp;gt;&lt;/li&gt;
	&lt;li&gt;When catching exceptions, do not use &lt;b&gt;throw;&lt;/b&gt; instead of &lt;b&gt;throw ex;&lt;/b&gt; to maintain the stack trace&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12539570">LUCENENET-467</key>
            <summary>.NETify the public API where appropriate</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ccurrens">Christopher Calvin Currens</reporter>
                        <labels>
                            <label>refactoring</label>
                    </labels>
                <created>Tue, 24 Jan 2012 13:06:38 +0700</created>
                <updated>Sat, 23 Jun 2012 05:12:28 +0700</updated>
                                            <version>Lucene.Net 2.9.2</version>
                    <version>Lucene.Net 2.9.4</version>
                    <version>Lucene.Net 2.9.4g</version>
                    <version>Lucene.Net 3.0.3</version>
                                    <fixVersion>Lucene.Net 3.6</fixVersion>
                                    <component>Lucene.Net Contrib</component>
                    <component>Lucene.Net Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                        <aggregatetimeremainingestimate seconds="0">0h</aggregatetimeremainingestimate>
                                        <aggregatetimespent seconds="60">1m</aggregatetimespent>
                                    <comments>
                            <comment id="13287229" author="lvl" created="Fri, 1 Jun 2012 15:02:24 +0700"  >&lt;p&gt;TopFieldCollector still has a Java-style create method (with lower case &apos;c&apos;)&lt;br/&gt;
I&apos;ll submit a patch that changes it and all references to it.&lt;/p&gt;</comment>
                            <comment id="13291130" author="ccurrens" created="Fri, 8 Jun 2012 00:06:13 +0700"  >&lt;p&gt;Thanks.  Patch applied in revision 1347715&lt;/p&gt;</comment>
                            <comment id="13399658" author="ccurrens" created="Sat, 23 Jun 2012 05:12:28 +0700"  >&lt;p&gt;Moving to 3.5&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12530522" name="Lucenenet-467-create.patch" size="6637" author="lvl" created="Fri, 1 Jun 2012 15:02:35 +0700"/>
                    </attachments>
                <subtasks>
                            <subtask id="12539572">LUCENENET-468</subtask>
                            <subtask id="12539574">LUCENENET-469</subtask>
                            <subtask id="12539575">LUCENENET-470</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Jun 2012 08:02:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225072</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313320" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Lucene Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02mlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>
